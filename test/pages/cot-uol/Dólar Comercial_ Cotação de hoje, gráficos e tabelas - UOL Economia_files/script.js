(function(){var resultSuccess;var working;var callbackSuccessQueue=[];var callbackErrorQueue=[];var errorCodes={load:{code:1,message:"erro no request do JSONP"}};function noop(){}function loadScript(url,charset){var head=document.getElementsByTagName("head")[0];var sc=document.createElement("script");sc.type="text/javascript";sc.async=true;sc.charset=charset||"utf-8";sc.src=url;sc.onerror=function(e){execCallbacks(false,{code:errorCodes.load.code,message:errorCodes.load.message,error:e});};sc.onload=sc.onreadystatechange=(function(url,sc){return function(){if(!sc.readyState||sc.readyState=="loaded"||sc.readyState=="complete"){head.removeChild(sc);sc.onload=sc.onreadystatechange=null;}};})(url,sc);head.insertBefore(sc,head.firstChild);return{"o":sc};}function execCallbacks(success,data){var list=success?callbackSuccessQueue:callbackErrorQueue;for(var i=0;i<list.length;i++){list[i](data);}callbackSuccessQueue=[];callbackErrorQueue=[];}function clearCachedResult(){resultSuccess=null;}function handleData(data){data.response=data.response||{};data.response.isLogged=data.isLogged;data=data.response;data.moreThan="";if(!data.isLogged){return data;}if(data.count===false){data.isLogged=false;return data;}if(data.name){data.name=data.name.length>11?data.name.slice(0,11)+"...":data.name;}if(typeof(data.count)!=="number"){data.count=0;}data.countStr=data.count+"";if(data.count===0){data.hasEmail="no-email";data.messagePrefix="você não tem novos e-mails";data.countStr="";}else{if(data.count===1){data.hasEmail="has-email";data.messagePrefix="você tem";data.messageSuffix="novo e-mail";}else{if(data.count>9&&data.count<100){data.moreThan="more-than-10";}else{if(data.count>99){data.moreThan="more-than-100";data.countStr="99+";}}data.hasEmail="has-email";data.messagePrefix="você tem";data.messageSuffix="novos e-mails";}}return data;}function notificationCallback(data){window.NotificacaoUOLCallback=undefined;working=false;resultSuccess=handleData(data);execCallbacks(true,resultSuccess);}function init(callbackSuccess,callbackError){callbackError=typeof callbackError==="function"?callbackError:noop;callbackSuccess=typeof callbackSuccess==="function"?callbackSuccess:noop;callbackSuccessQueue.push(callbackSuccess);callbackErrorQueue.push(callbackError);if(working&&!resultSuccess){return;}if(resultSuccess){execCallbacks(true,resultSuccess);return;}working=true;window.NotificacaoUOLCallback=notificationCallback;var url="//notify.uol.com.br/services/notificacoes_email?callback=NotificacaoUOLCallback";if(/bol.uol.com.br/.test(location.host)){url+="&emailDomain=bol.com.br";}loadScript(url);}window.NotificacaoUOL={init:init,clear:clearCachedResult};})();