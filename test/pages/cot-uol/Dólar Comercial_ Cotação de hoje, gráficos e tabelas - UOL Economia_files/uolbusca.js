(function(window){var Lib=window.Lib||{};Lib.UOLBusca={IMAGE_DEFAULT:"http://c.imguol.com/busca/logo_uol_80x80.gif",URL:{GOOGLEUOL_BRASIL:"http://brasil.busca.uol.com.br/buscar.html",GOOGLEUOL_MUNDO:"http://mundo.busca.uol.com.br/buscar.html",GOOGLEUOL_IMAGES:"http://busca.uol.com.br/imagem/index.html",UOLADS:"http://adclient-uol.lp.uol.com.br/ci_n_ads.js",TAGPAGES:"http://tagpage.uol.com.br/",GOOGLEADS:"http://busca.uol.com.br/stations/buscar.html",UOLMAIS:"http://mais.busca.uol.com.br/apiuol/index.js",MONTECARLO:"http://search.uol.com.br/",MONTECARLO_VELOCITY:(window.location.host.indexOf("uol")!=-1)?"http://"+window.location.host+window.location.pathname+"/montecarlo.htm":"http://entretenimento.uol.com.br/busca/montecarlo.htm"},SHOW_MODE:{ALL:0,ONLOAD:1},STATIONS:{"bichos":"Bichos","carros":"Carros","casa":"Casa","celebridades":"Celebridades","ciencia":"Ciência e Saúde","cinema":"Cinema","criancas":"Crianças","download OR downloads":"Downloads","economia":"Economia","Educação":"Educação","entretenimento":"Entretenimento","gay":"Gay","horoscopo":"Horóscopo","humor":"Humor","jogos":"Jogos","jovem OR jovens":"Jovem","música":"Música","noticias":"Notícias","receitas":"Receitas","sexo":"Sexo","tecnologia":"Tecnologia","viagem":"Viagem"},pageUrl:location.pathname.substr(location.pathname.lastIndexOf("/")+1,location.pathname.length),params:{},validParams:[],searchers:{},radioQueries:{},searchersQty:0,loadedItems:0,settings:null,searchersLoaded:[],timeout:null,process:function(){this.timeout=setTimeout(function(){if(Lib.UOLBusca.settings.showMode==Lib.UOLBusca.SHOW_MODE.ALL){Lib.UOLBusca.settings.onReturnProcessCallback(Lib.UOLBusca);}for(var s in Lib.UOLBusca.searchersLoaded){Lib.UOLBusca.searchers[Lib.UOLBusca.searchersLoaded[s]].show();Lib.UOLBusca.settings.onCompleteCallback(Lib.UOLBusca);}},10000);Lib.UOLBusca.loadedItems=0;if(typeof(Lib.UOLBusca.settings.onProcessCallback)==typeof(function(){})){Lib.UOLBusca.settings.onProcessCallback(this);}for(var s in this.searchers){jQuery(this.searchers[s]).bind("searcher_loaded",function(event,self){Lib.UOLBusca.searchersLoaded.push(this.id);if((Lib.UOLBusca.settings.showMode==Lib.UOLBusca.SHOW_MODE.ONLOAD)&&this.loaded){this.show();}Lib.UOLBusca.loaded();});this.searchers[s].process();}},init:function(settings){this.settings=settings||new Lib.UOLBusca.Settings();this.validParams=settings.validParams;jQuery(document).ready(function(){if(Lib.UOLBusca.settings.form){jQuery(Lib.UOLBusca.settings.form).submit(function(){var val=jQuery.trim(jQuery("#"+Lib.UOLBusca.settings.field).val());if(val&&(val.length>1)){query="term="+val;Lib.UOLBusca.refresh(query,true);}return false;});}if((window.location.search.length>0)||(window.location.hash.length>0)){Lib.UOLBusca.reset();Lib.UOLBusca.refresh();}if(Lib.UOLBusca.settings.activateSuggest){Lib.UOLBusca.Suggest.init("#"+Lib.UOLBusca.settings.field);}Lib.UOLBusca.settings.onInitCallback();});jQuery(window).resize(function(){Lib.UOLBusca.Modal.imageResize();});},reset:function(){this.params=this.params||{};if(window.location.hash.length>0){this.params=Lib.UOLBusca.Util.parseToObj(window.location.hash,this.params);}if(((!this.params["q"])||(!this.params["tag-id"]))&&window.location.search.length>0){this.params=Lib.UOLBusca.Util.parseToObj(window.location.search,this.params);}if(this.searchersQty){this.searchersLoaded=[];this.searchersQty=0;for(var s in this.searchers){this.searchersQty++;this.searchers[s].reset();}this.searchers=new Object();}},refresh:function(query,reload){if(reload){window.location.hash="";window.location.search=query;}else{if(query){this.params=Lib.UOLBusca.Util.parseToObj(query);for(var s in this.searchers){this.searchers[s].update();}}if(typeof(Lib.UOLBusca.settings.onRefreshCallback)==typeof(function(){})){Lib.UOLBusca.settings.onRefreshCallback(this);}if(Lib.UOLBusca.params[Lib.UOLBusca.settings.field]&&Lib.UOLBusca.params[Lib.UOLBusca.settings.field].length>0){jQuery("#"+Lib.UOLBusca.settings.field).val(Lib.UOLBusca.params[Lib.UOLBusca.settings.field]);Lib.UOLBusca.process();}else{if(Lib.UOLBusca.params["tag-id"]&&Lib.UOLBusca.params["tag-id"].length>0){Lib.UOLBusca.process();}}this.updateHash();}},updateHash:function(){var searchparams=Lib.UOLBusca.Util.copyValidParams(Lib.UOLBusca.params,Lib.UOLBusca.validParams);searchparams=Lib.UOLBusca.Util.parseToURLSearch(searchparams);if(window.location.search!=searchparams){searchparams=(searchparams.indexOf("?")==0)?searchparams.substring(1):searchparams;window.location.hash=searchparams;}},addSearch:function(searcher,settings){searcher.init(settings);searcher.reset();this.searchersQty++;this.searchers[searcher.id]=searcher;},loaded:function(){if(this.loadedItems<this.searchersQty-1){this.loadedItems++;}else{if(this.timeout){clearTimeout(this.timeout);}if(this.settings.showMode==Lib.UOLBusca.SHOW_MODE.ALL){this.settings.onReturnProcessCallback(this);for(var s in this.searchers){this.searchers[s].show();}}this.settings.onCompleteCallback(this);}}};Lib.UOLBusca.Settings=function(){this.form="#UOLBusca";this.field="q";this.station="";this.stationTitle="";this.onRefreshCallback=function(obj){};this.onCompleteCallback=function(obj){};this.onProcessCallback=function(obj){};this.onInitCallback=function(obj){};this.onReturnProcessCallback=function(obj){};this.validParams=["q","tag-id","tag-texto"];this.activateSuggest=true;};Lib.UOLBusca.Searcher=function(){this.searchUrl="";this.data={};this.parser=function(){return"";};this.parseParams=function(params){};this.validParams=[];this.showParams=[];this.params={};this.callback=function(data){};this.loaded=false,this.html="",this.className="Searcher";this.settings=new Lib.UOLBusca.Searcher.Settings();this.getNewId=function(){var id=this.settings.element;id=(id)?id.toLowerCase().replace(/[^a-z]/gi,""):"";id=this.className+"_"+id;return id;};this.id="";this.init=function(settings){this.settings=settings;this.id=this.getNewId();var tmpl=new Lib.UOLBusca.Template(this.params.callback);this.params.callback=tmpl.compile({id:this.id});if(this.request){this.request.abort();this.request=null;}};this.reset=function(){jQuery.extend(this.params,Lib.UOLBusca.params);if(this.settings.params&&this.settings.params.length>0){this.params=Lib.UOLBusca.Util.parseToObj(this.settings.params,this.params);}};this.update=function(){jQuery.extend(this.params,Lib.UOLBusca.params);};this.request=null;this.dataType="jsonp";this.process=function(){this.loaded=false;var searchparams=this.parseParams(this.params);var url=this.searchUrl+searchparams;if(typeof(this.settings.onProcessCallback)==typeof(function(){})){this.settings.onProcessCallback(this);}var callbackName=this.params["callbackName"];var callback=this.params["callback"];var contentType=this.params["contentType"]?this.params["contentType"]:"application/json; charset=utf-8";var onErrorCallback=this.settings.onErrorCallback;if(this.dataType=="jsonp"){if(contentType.indexOf("utf-8")==-1){this.request=jQuery.ajax({url:decodeURIComponent(url),dataType:"jsonp",cache:true,contentType:contentType,beforeSend:function(xhr){xhr.overrideMimeType("text/plain; charset=iso-8859-1");},processData:false,jsonp:callbackName,jsonpCallback:callback,error:function(jqXHR,textStatus,errorThrown){onErrorCallback.call(jqXHR,textStatus,errorThrown);}});}else{this.request=jQuery.ajax({url:url,dataType:"jsonp",cache:true,contentType:contentType,processData:false,jsonp:callbackName,jsonpCallback:callback,error:function(jqXHR,textStatus,errorThrown){onErrorCallback.call(jqXHR,textStatus,errorThrown);}});}}else{this.request=jQuery.ajax({url:url,context:document.body,dataType:"html",error:function(jqXHR,textStatus,errorThrown){onErrorCallback.call(jqXHR,textStatus,errorThrown);},success:function(data){var str=callback+"(data)";eval(str);}});}};this.checkLoaded=null;this.ajaxResponse=function(response){this.loaded=true;if(this.dataType=="html"){this.data=response;this.html=response;}else{response=eval(response);this.data=response;this.html=this.parser();}jQuery(this).trigger("searcher_loaded",[this]);if(this.settings.onCompleteCallback){this.checkLoaded=setInterval((function(html,callback,checkLoaded){return function(){if(html&&html.length>0){clearInterval(checkLoaded);callback();}};})(this.html,this.settings.onCompleteCallback,this.checkLoaded),500);}};this.show=function(){var container=jQuery(this.settings.container);container=(container.length>0)?container[0]:container;container.innerHTML=this.html;if(this.settings.containersAds&&this.settings.containersAds.length>0){if(this.ads&&this.ads.length>0){for(var i in this.settings.containersAds){if(this.ads[i]&&this.ads[i].length>0){var containerAds=jQuery(this.settings.containersAds[i]);containerAds=(containerAds.length>0)?containerAds[0]:containerAds;containerAds.innerHTML=this.ads[i];}}}}};this.prevPage=function(pageLink){var link='<span class="nav pages prev"><a href="'+pageLink+'">Anterior</a></span>';return link;};this.nextPage=function(pageLink){var link='<span class="nav pages next"><a href="'+pageLink+'">Pr&oacute;xima</a></span>';return link;};this.pageLink=function(obj){var searchparams=Lib.UOLBusca.Util.copyValidParams(Lib.UOLBusca.params,Lib.UOLBusca.validParams);jQuery.extend(searchparams,obj);searchparams=Lib.UOLBusca.Util.parseToURLSearch(searchparams);return Lib.UOLBusca.pageUrl+searchparams;};};Lib.UOLBusca.Searcher.Settings=function(elemName,params,paginacao,vejamais){this.element=elemName;this.container=jQuery(elemName);this.containersAds=[];this.adsQty=[];this.params=(params)?params:null;this.cropWidth=142;this.cropHeight=100;this.imageWidth=142;this.imageHeight=100;this.paginacao=(paginacao!=null)?paginacao:true;this.vejamais=(vejamais!=null)?vejamais:false;this.showMode=Lib.UOLBusca.SHOW_MODE.ALL;this.onProcessCallback=function(obj){};this.onErrorCallback=function(jqXHR,textStatus,errorThrown){};this.onCompleteCallback=function(obj){};};Lib.UOLBusca.Util={parseToObj:function(string,obj){obj=(obj)?obj:{};string=jQuery.trim(string);string=(string.indexOf("?")==0)?string.substring(1):string;string=(string.indexOf("#")==0)?string.substring(1):string;if(string.length){var arr=[];if(string.indexOf("&")!=-1){arr=string.split("&");}else{arr.push(string);}if(arr.length){for(var i=0;i<arr.length;i++){var arrk=arr[i].split("=");var val="";try{if(arrk[1]=="null"){arrk[1]=null;}else{val=decodeURIComponent(arrk[1]);}}catch(e){val=arrk[1];}if(arrk[0].indexOf("tag-id")==-1){val=val.replace(/\+/g," ");}else{val=val.replace(/\s/g,"+AND+");}obj[arrk[0]]=val;}}}return obj;},parseToURLSearch:function(obj){var str="?";for(var p in obj){if(p&&obj[p]){str+=p+"="+encodeURIComponent(obj[p])+"&";}}str=(str.lastIndexOf("&")==str.length-1)?str.substring(0,str.length-1):str;return str;},convertSizesToStr:function(obj){var arr=[];for(o in obj){arr.push(obj[o].width+"x"+obj[o].height);}return arr.join(";");},copyValidParams:function(params,validParams){var obj={};for(var i=0;i<validParams.length;i++){obj[validParams[i]]=params[validParams[i]];}return obj;},writeTagImage:function(src,imgW,imgH,cropW,cropH,credito,callbackOnError,className,isAlbum,extra){var imagesrc=src;if(isAlbum){imagesrc=jQuery.trim(src);}else{imagesrc=Lib.UOLBusca.Util.getPathWithCrop(jQuery.trim(src),imgW+"x"+imgH);}src=imagesrc;var html="";if(credito&&credito.length>0){credito=credito.replace(/['"]/g,"");credito=(credito)?'alt="'+credito+'" title="'+credito+'" ':"";}html+='<span class="image'+cropW+"x"+cropH;if(className){html+=" "+className;}html+='" ';html+=credito;html+=">";html+='<img src="'+src+'" ';html+=credito;if(callbackOnError){html+='onError="'+callbackOnError+'(this);" ';}html+=' imgH="'+imgH+'" ';html+=' imgW="'+imgW+'" ';if((imgW>imgH)&&(imgW>cropW)){var prop=(imgW/imgH);var propW=(prop*cropH);if(propW>cropW){html+='height="'+cropH+'" ';var dist=(cropW-propW)/2;dist=Math.round(dist);html+='style="position:relative;left:'+dist+'px;top:0" ';}else{html+='width="'+cropW+'" ';}}else{html+='width="'+cropW+'" ';}if(extra){html+=extra;}html+=" /></span>";return html;},number_format:function(number,decimals,dec_point,thousands_sep){number=(number+"").replace(/[^0-9+\-Ee.]/g,"");var n=!isFinite(+number)?0:+number,prec=!isFinite(+decimals)?0:Math.abs(decimals),sep=(typeof thousands_sep==="undefined")?",":thousands_sep,dec=(typeof dec_point==="undefined")?".":dec_point,s="",toFixedFix=function(n,prec){var k=Math.pow(10,prec);return""+Math.round(n*k)/k;};s=(prec?toFixedFix(n,prec):""+Math.round(n)).split(".");if(s[0].length>3){s[0]=s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,sep);}if((s[1]||"").length<prec){s[1]=s[1]||"";s[1]+=new Array(prec-s[1].length+1).join("0");}return s.join(dec);},formatDateStr:function(dateStr){var dateObj=Lib.UOLBusca.Util.strToDate(dateStr);var mm=(dateObj.getMonth()+1);mm=(mm<10)?"0"+mm:String(mm);var dd=dateObj.getDate();dd=(dd<10)?"0"+dd:String(dd);var str=String(dateObj.getFullYear())+mm+dd;return str;},strToDate:function(dateStr){var dateArr=String(dateStr).split("/");var dateObj=new Date(Number(dateArr[2]),dateArr[1]-1,Number(dateArr[0]));return dateObj;},formatDateRange:function(from,to){var fromDate=Lib.UOLBusca.Util.formatDateStr(from);var toDate=Lib.UOLBusca.Util.formatDateStr(to);var daterange="created=["+fromDate+"000000:"+toDate+"235959]";return daterange;},textExcerpt:function(text,len){len=len||140;var excerpt=text||"";if(excerpt.length>(len-3)){excerpt=excerpt.substring(0,len-3);excerpt+="...";}return excerpt;},getPathWithCrop:function(path,crop){var $return=path;if(path&&crop){if(!path.match(/\/\d+x\d+\//)){if(!path.match(new RegExp(crop))){$return=path.replace(/_\d+x\d+/,"").replace(/(.*)\.(jpeg|jpg|png|gif)/,"$1_"+crop+".$2");}else{if(!path.match(/\d+x\d+/)){$return=path.replace(/(.*)\.(jpeg|jpg|gif|png)/,"$1_"+crop+".$2");}}}else{$return=path.replace(/\d+x\d+/,crop);}}return $return;},getMaxSize:function(sizes){var arrSizes=(typeof(sizes)=="string")?Lib.UOLBusca.Util.orderSizes(sizes):sizes;var w=0;var h=0;for(var i=0;i<arrSizes.length;i++){if(w<=arrSizes[i].width){if(h<=arrSizes[i].height){w=arrSizes[i].width;h=arrSizes[i].height;}}}return w+"x"+h;},orderSizes:function(sizes){var arr=[];if(sizes.indexOf(";")!=-1){arr=sizes.split(";");}else{arr.push(sizes);}var arrSizes=[];if(arr.length>0){for(var s in arr){if(arr[s].length>0){var size=arr[s].match(/(\d+)x(\d+)/);if(size&&(size.length>0)){var obj={width:Number(size[1]),height:Number(size[2])};arrSizes.push(obj);}}}arrSizes=Lib.UOLBusca.Util.merge_sort(arrSizes,function(a,b){var val=false;if(a.width>=b.width){if(a.height>=b.height){val=true;}}return val;});}return arrSizes;},merge_sort:function(array,comparison){if(array.length<2){return array;}var middle=Math.ceil(array.length/2);return Lib.UOLBusca.Util.merge(Lib.UOLBusca.Util.merge_sort(array.slice(0,middle),comparison),Lib.UOLBusca.Util.merge_sort(array.slice(middle),comparison),comparison);},merge:function(left,right,comparison){var result=new Array();while((left.length>0)&&(right.length>0)){if(comparison(left[0],right[0])<0){result.push(left.shift());}else{result.push(right.shift());}}while(left.length>0){result.push(left.shift());}while(right.length>0){result.push(right.shift());}return result;},findSize:function(sizes,minWidth,minHeight){var arrSizes=(typeof(sizes)=="string")?Lib.UOLBusca.Util.orderSizes(sizes):sizes;var arrAux=[];for(var i in arrSizes){if((arrSizes[i].width>=minWidth)&&(arrSizes[i].height>=minHeight)){arrAux.push(arrSizes[i]);}}return arrAux;},getURL:function(){if(arguments&&arguments.length){for(var i=0;i<arguments.length;i++){if(arguments[i]){return arguments[i];}break;}}return false;},formatDate:function(timestamp){var $ts=timestamp.match(/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/);if($ts){return $ts[3]+"."+$ts[2]+"."+$ts[1];}var $ts2=timestamp.match((/(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})/));return(!$ts2)?timestamp:$ts2[3]+"."+$ts2[2]+"."+$ts2[1];},formatTime:function(timestamp){var $ts=timestamp.match(/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/);if($ts){return $ts[4]+"h"+$ts[5];}var $ts2=timestamp.match((/(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})/));return(!$ts2)?timestamp:$ts2[4]+"h"+$ts2[5];},formatDateTimeTag:function(timestamp){var $ts=timestamp.match(/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/);if($ts){return($ts[1]+"-"+$ts[2]+"-"+$ts[3]+"T"+$ts[4]+":"+$ts[5]);}var $ts2=timestamp.match((/(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})/));return(!$ts2)?timestamp:$ts2[1]+"-"+$ts2[2]+"-"+$ts2[3]+"T"+$ts2[4]+":"+$ts2[5];},formatTags:function(list){var $items=[];if(list){$list=list.split(";");for(l in $list){if(jQuery.trim($list[l])){$items.push(jQuery.trim($list[l]));}}}return($items.length)?$items.join(", "):false;},removeAccents:function(s){var r=s.toLowerCase();r=r.replace(new RegExp("\\s","g"),"");r=r.replace(new RegExp("[àáâãäå]","g"),"a");r=r.replace(new RegExp("æ","g"),"ae");r=r.replace(new RegExp("ç","g"),"c");r=r.replace(new RegExp("[èéêë]","g"),"e");r=r.replace(new RegExp("[ìíîï]","g"),"i");r=r.replace(new RegExp("ñ","g"),"n");r=r.replace(new RegExp("[òóôõö]","g"),"o");r=r.replace(new RegExp("œ","g"),"oe");r=r.replace(new RegExp("[ùúûü]","g"),"u");r=r.replace(new RegExp("[ýÿ]","g"),"y");r=r.replace(new RegExp("\\W","g"),"");return r;}};Lib.UOLBusca.UOLImagem=function(src,width,height,tamPadrao,tamanhos,isAlbum){this.image=null;this.src=src;this.width=width;this.height=height;this.padrao=(tamPadrao)?tamPadrao:"";this.disponiveis=[];this.tamanhos=(tamanhos&&tamanhos.length>0)?tamanhos:"";if((!this.tamanhos.match(this.padrao))&&(this.padrao.length>0)){var aux=this.padrao.split("x");this.disponiveis=Lib.UOLBusca.Util.findSize(tamanhos,Number(aux[0]),Number(aux[1]));if(this.disponiveis.length==0){this.disponiveis=Lib.UOLBusca.Util.orderSizes(tamanhos);}}this.isAlbum=(isAlbum)?isAlbum:false;this.tentativas=0;this.load=function(){this.image=new Image();this.image.parent=this;this.image.src="";var tentativas=this.tentativas;var totDisponiveis=this.disponiveis.length;this.image.onerror=function(){jQuery(this.parent).trigger("image_error",[this.parent]);};jQuery(this.image).load(function(){jQuery(this.parent).trigger("image_loaded",[this.parent]);});var url=this.src;if(this.isAlbum){url=jQuery.trim(this.src);}else{if(this.padrao!=""){if(this.tamanhos.match(this.padrao)){url=Lib.UOLBusca.Util.getPathWithCrop(jQuery.trim(this.src),this.padrao);}else{if(this.tentativas<this.disponiveis.length){var tam=this.disponiveis[this.tentativas];if(typeof(tam)=="object"){tam=tam.width+"x"+tam.height;}url=Lib.UOLBusca.Util.getPathWithCrop(jQuery.trim(this.src),tam);this.tentativas++;}}}else{url=Lib.UOLBusca.IMAGE_DEFAULT;}}this.image.src=url;if(this.image.width!=0){jQuery(this).trigger("image_loaded",[this]);}};this.write=function(){var html="";if(this.image.src!=Lib.UOLBusca.IMAGE_DEFAULT){if((this.image)&&(this.image.width>0)){html+='<img src="'+this.image.src+'" ';if((this.image.width>this.image.height)&&(this.image.width>this.width)){var prop=(this.image.width/this.image.height);var propW=(prop*this.height);if(propW>this.width){html+='height="'+this.height+'"';var dist=(this.width-propW)/2;dist=Math.round(dist);html+=' style="position:relative;left:'+dist+'px;top:0"';}else{html+='width="'+this.width+'"';}}else{html+='width="'+this.width+'"';}html+=" />";}}return html;};};Lib.UOLBusca.Template=function(string){this.code=string;this.compile=function(source){var result=this.code;if(source){for(var k in source){var val=new String(source[k]);if(val&&(val.length>0)){var patt=eval("/{\\$"+k+"}/g");if(patt.test(result)){val=val.replace(/"/g,'"');result=result.replace(patt,val);}}}}return result;};};Lib.UOLBusca.Searcher.GoogleUOL=function(){this.className="GoogleUOL";this.params={ad:"off",format:"jsonp",callbackName:"jsonp",callback:"Lib.UOLBusca.searchers.{$id}.callback",contentType:"application/json; charset=ISO-8859-1"};this.validParams=["q","start","format","ad","num"];this.callback=function(data){this.ajaxResponse(data);};this.parser=function(){var response=this.data;var result="";if((response["res"])&&(response["res"]["r"]&&response["res"]["r"].length>0)){var itens=response["res"]["r"];for(var i=0;i<itens.length;i++){var item=itens[i];var url=item.u;if(this.className=="GoogleUOL_Images"){url="http://images-partners.google.com/images?term=tbn:"+item.iid+":"+url;}var descricao=item.s;descricao=jQuery.trim((descricao).replace(/<br>/g,""));var urlencoded=Lib.UOLBusca.Util.textExcerpt(jQuery.trim(item.ue),this.settings.lineSize);var obj={url:url,urlencoded:urlencoded,titulo:item.t,descricao:(descricao.length>1)?descricao:null};result+=this.parseToHTML(obj);}}else{var por="por";var palavra=(Lib.UOLBusca.params["q"]&&(Lib.UOLBusca.params["q"].length>0))?Lib.UOLBusca.params["q"]:Lib.UOLBusca.params["tag-texto"];palavra=palavra.replace(/</g,"&lt;");palavra=palavra.replace(/>/g,"&gt;");result='<section><article class="vazio"><p>Sua busca '+por+" <strong>"+palavra+"</strong> não encontrou resultados.<br />Faça uma nova busca usando outros termos</p></article></section>";}var base=(Lib.UOLBusca.params["base"]);var resetObj=Lib.UOLBusca.Util.copyValidParams(Lib.UOLBusca.Util.parseToObj(this.settings.param+"&base="+base,this.params),Lib.UOLBusca.settings.validParams);var obj={query:this.params["q"],totalResult:Lib.UOLBusca.Util.number_format(response["res"]["m"],0,",","."),prevlink:(response["prev"])?this.prevPage(this.pageLink({start:response["prev"],base:base})):'<span class="nav pages prev disabled">Anterior</span>',nextlink:(response["next"])?this.nextPage(this.pageLink({start:response["next"],base:base})):'<span class="nav pages next disabled">Pr&oacute;xima</span>',result:result||"",vejamais:this.pageLink(resetObj)};var html="";var class_div=(this.className=="GoogleUOL_Images")?"googleimages":"web";html+='<div class="'+class_div+'">\n';html+="{$result}";html+="</div>\n";if((response["res"])&&(response["res"]["r"]&&response["res"]["r"].length>0)){if(this.settings.paginacao){html+='<div class="filtro-indice last">\n';html+="{$prevlink}{$nextlink}\n";html+="</div>\n";}}if((this.settings.vejamais)&&((response["next"]))){html+='<span class="vejamais"><a href="{$vejamais}">Veja mais resultados</a></span>\n';}var tmpl=new Lib.UOLBusca.Template(html);return tmpl.compile(obj);};this.parseParams=function(params){var validparams=Lib.UOLBusca.Util.copyValidParams(params,this.validParams);validparams["q"]=escape(params["q"]);if(this.className=="GoogleUOL_Images"){validparams["num"]="20";}if(params["tag-texto"]&&(params["tag-texto"].length>0)){validparams["q"]=escape(params["tag-texto"]);}return Lib.UOLBusca.Util.parseToURLSearch(validparams);};this.parseToHTML=function(obj){var html="<article>\n";if(this.className=="GoogleUOL_Images"){html+='<a href="{$url}"><img src="{$url}" height="133" /></a>\n';}else{html+='<h1><a href="{$url}">{$titulo}</h1></a>\n';if(obj.descricao){html+='<p class="descricao">{$descricao}</p>\n';}html+='<p class="url"><a href="{$url}">{$urlencoded}</a></p>\n';}html+="</article>\n";var tmpl=new Lib.UOLBusca.Template(html);return tmpl.compile(obj);};};Lib.UOLBusca.Searcher.GoogleUOL.prototype=new Lib.UOLBusca.Searcher();Lib.UOLBusca.Searcher.GoogleUOL.Mundo=function(){this.className="GoogleUOL_Mundo";this.searchUrl=Lib.UOLBusca.URL.GOOGLEUOL_MUNDO;};Lib.UOLBusca.Searcher.GoogleUOL.Mundo.prototype=new Lib.UOLBusca.Searcher.GoogleUOL();Lib.UOLBusca.Searcher.GoogleUOL.Brasil=function(){this.className="GoogleUOL_Brasil";this.searchUrl=Lib.UOLBusca.URL.GOOGLEUOL_BRASIL;};Lib.UOLBusca.Searcher.GoogleUOL.Brasil.prototype=new Lib.UOLBusca.Searcher.GoogleUOL();Lib.UOLBusca.Searcher.GoogleUOL.Images=function(){this.className="GoogleUOL_Images";this.searchUrl=Lib.UOLBusca.URL.GOOGLEUOL_IMAGES;};Lib.UOLBusca.Searcher.GoogleUOL.Images.prototype=new Lib.UOLBusca.Searcher.GoogleUOL();Lib.UOLBusca.Searcher.Montecarlo=function(){this.className="Montecarlo";this.searchUrl=Lib.UOLBusca.URL.MONTECARLO;this.params={repository:"mix2",portal:"uol",platform:"web",fields:"url-uol,url-bol,url-bol-mobile,url-uol-mobile,portal,station,channel,titulo,updated,imagem,imagem-credito,tags-texto,repository,descricao,publisher",callbackName:"jsonp",callback:"Lib.UOLBusca.searchers.{$id}.callback",format:"jsonp",size:"10",charset:"UTF-8"};this.validParams=["repository","portal","platform","station","channel","fields","size","charset","q","next","prev","created"];this.callback=function(data){this.ajaxResponse(data);};this.parser=function(){var response=this.data;var result="";var docs=response["docs"]||{};if(docs&&docs.length>0){var arr=[];for(var i=0;i<docs.length;i++){var item=docs[i];var titulo=item["titulo"];var info=[];if(item["portal"]&&(jQuery.trim(item["portal"]).length>0)){info.push(item["portal"]);}if(item["station"]&&(jQuery.trim(item["station"]).length>0)){info.push(item["station"]);}if(item["channel"]&&(jQuery.trim(item["channel"]).length>0)){info.push(item["channel"]);}info=info.join(" - ");var classname=(i%2==0)?"odd":"even";classname+=" "+item["repository"];var publisher=item.publisher;var imagem=item.imagem;var credito=item["imagem-credito"];var link=Lib.UOLBusca.Util.getURL(item["url-uol"],item["url-bol"],item["url-uol-mobile"],item["url-bol-mobile"]);var repository=item["repository"];var data=Lib.UOLBusca.Util.formatDate(item.updated);var updated=Lib.UOLBusca.Util.formatTime(item.updated);var datetime=Lib.UOLBusca.Util.formatDateTimeTag(item.updated);var descricao=Lib.UOLBusca.Util.textExcerpt(item["descricao"]);var obj={classname:classname,data:updated,datetime:datetime,info:info,link:link,titulo:titulo,imagem:imagem,credito:credito,descricao:descricao,publisher:publisher,repository:repository};if(arr[data]){arr[data]+=this.parseToHTML(obj);}else{arr[data]=this.parseToHTML(obj);}}for(var data in arr){result+='<div class="data">'+data+"</div>\n";result+="<ul>\n";if(arr[data]){result+=arr[data];}result+="</ul>\n";}}else{result="A busca não retornou resultado";}var resetObj=Lib.UOLBusca.Util.copyValidParams(Lib.UOLBusca.Util.parseToObj(this.settings.param+"&base=uol",this.params),Lib.UOLBusca.settings.validParams);var obj={query:Lib.UOLBusca.params["q"],station:(Lib.UOLBusca.params["station"])?"UOL "+Lib.UOLBusca.STATIONS[Lib.UOLBusca.params["station"]]:"UOL",channel:(Lib.UOLBusca.params["channel"])?Lib.UOLBusca.STATIONS[Lib.UOLBusca.params["channel"]]:"",prevlink:(response["prev"])?this.prevPage(this.pageLink({prev:response["prev"],next:null})):'<span class="prev">Anterior</span>',nextlink:(response["next"])?this.nextPage(this.pageLink({next:response["next"],prev:null})):'<span class="next">Pr&oacute;xima</span>',result:result||"",vejamais:this.pageLink(resetObj)};var html="";html+='<div class="uol">\n';html+="{$result}";html+="</div>\n";if(this.settings.paginacao){html+='<div class="paginacao">\n';html+="{$prevlink}{$nextlink}\n";html+="</div>\n";}if(this.settings.vejamais&&response["next"]){html+='<span class="vejamais"><a href="{$vejamais}">Veja mais resultados</a></span>\n';}var tmpl=new Lib.UOLBusca.Template(html);return tmpl.compile(obj);};this.parseParams=function(params){var paramTemp=Lib.UOLBusca.Util.copyValidParams(params,this.validParams);paramTemp["q"]=this.parseQuery(paramTemp["q"]);return Lib.UOLBusca.Util.parseToURLSearch(paramTemp);};this.parseQuery=function(string){string=string||"";if(string.indexOf(" ")>-1){string=string.replace(/ /g," AND ");}return string;};this.parseToHTML=function(obj){obj.link=obj.link||"#";obj.title=obj.titulo.replace(/['"]/g,"");var html='<li class="{$classname}"><a href="{$link}" title="{$title}">\n';if(obj.imagem){var isAlbum=((obj.publisher&&(obj.publisher=="UOL.Álbum"))||(obj.repository&&(obj.repository=="album")));var img=Lib.UOLBusca.Util.writeTagImage(obj.imagem,this.settings.imageWidth,this.settings.imageHeight,this.settings.cropWidth,this.settings.cropHeight,obj.credito,"Lib.UOLBusca.searchers."+this.id+".onImageError","image",isAlbum);if(obj.repository=="video"){img=Lib.UOLBusca.Util.writeTagImage(obj.imagem,135,101,135,101,obj.credito,"Lib.UOLBusca.searchers."+this.id+".onImageError","image",true);}html+=img;}html+='<time datetime="{$datetime}">{$data}</time>\n';html+='<span class="info">{$info}</span>\n';html+='<span class="title">{$titulo}</span>\n';if(obj.descricao){html+='<span class="descricao">{$descricao}</span>\n';}html+="</a></li>\n";var tmpl=new Lib.UOLBusca.Template(html);return tmpl.compile(obj);};this.onImageError=function(elem){jQuery(elem).parent().css("display","none");return false;};};Lib.UOLBusca.Searcher.Montecarlo.prototype=new Lib.UOLBusca.Searcher();Lib.UOLBusca.Searcher.MontecarloVelocity=function(){this.className="MontecarloVelocity";this.searchUrl=Lib.UOLBusca.URL.MONTECARLO_VELOCITY;this.params={repository:"mix2",callbackName:"jsonp",callback:"Lib.UOLBusca.searchers.{$id}.callback",format:"jsonp",size:"13"};this.dataType="html";this.validParams=["repository","station","channel","size","q","next","prev","created","paging","resumed","headline","tag-id","tag-texto"];this.callback=function(data){this.ajaxResponse(data);};this.parseParams=function(params){console.log(params);var paramTemp=Lib.UOLBusca.Util.copyValidParams(params,this.validParams);paramTemp["query"]=paramTemp["q"];paramTemp["q"]=this.parseQuery(paramTemp["q"]);return Lib.UOLBusca.Util.parseToURLSearch(paramTemp);};this.parseQuery=function(string){string=string||"";if(string.indexOf(" ")>-1){string=string.replace(/ /g," AND ");}return string;};this.onImageError=function(elem){jQuery(elem).parent().css("display","none");return false;};};Lib.UOLBusca.Searcher.MontecarloVelocity.prototype=new Lib.UOLBusca.Searcher();Lib.UOLBusca.Searcher.Videos=function(){this.className="Videos";this.searchUrl=Lib.UOLBusca.URL.UOLMAIS;this.params={time:"all",types:"V",edFilter:"editorial",num:"10",start:"1",callbackName:"callback",callback:"Lib.UOLBusca.searchers.{$id}.callback"};this.validParams=["time","types","q","start","edFilter","num"];this.callback=function(data){this.ajaxResponse(data);};this.parser=function(){var response=this.data;var result="";var list=response["list"]||{};if(list&&list.length>0){var arr=[];for(var i=0;i<list.length;i++){var item=list[i];var titulo=item["title"];var info=item["author"];var imagem=item.thumbLarge;var credito=item["title"];var link=item.url;var publishedAt=item.publishedAt;var data=Lib.UOLBusca.Util.formatDate(publishedAt);var updated=data+" - "+Lib.UOLBusca.Util.formatTime(publishedAt);var datetime=Lib.UOLBusca.Util.formatDateTimeTag(publishedAt);var descricao=item["description"];var tags=item["tags"];var visitas=(item["views"])?item["views"]:0;var comments=(item["comments"])?(item["comments"]):0;var hash=["noticias.uol.com.br","eleicoes.uol.com.br/2012","educacao.uol.com.br","tecnologia.uol.com.br","boaforma.uol.com.br"];for(h=0;h<hash.length;h++){if((location.href.indexOf(hash[h])!=-1)&&(link.length>1)){link="http://"+hash[h]+"/videos/assistir.htm?video="+item.id;}}var obj={data:updated,datetime:datetime,info:info,link:link,titulo:titulo,imagem:imagem,credito:credito,descricao:descricao,tags:tags,visitas:visitas,comments:comments};result+="<section>\n";result+=this.parseToHTML(obj);result+="</section>\n";}}else{var palavra=Lib.UOLBusca.params["q"];palavra=palavra.replace(/</g,"&lt;");palavra=palavra.replace(/>/g,"&gt;");result='<section><article class="vazio"><p>Sua busca por <strong>'+palavra+"</strong> não encontrou resultados.<br />Faça uma nova busca usando outros termos.</p></article></section>";}var resetObj=Lib.UOLBusca.Util.copyValidParams(Lib.UOLBusca.Util.parseToObj(this.settings.param+"&base=video",this.params),Lib.UOLBusca.settings.validParams);var start=this.params["start"]=(this.params["start"])?this.params["start"]:1;var num=Number(this.params["num"]);var obj={query:Lib.UOLBusca.params["q"],prevlink:(response.paging&&(Number(response.paging.currentPage)>1))?this.prevPage(this.pageLink({start:Number(start)-num})):'<span class="nav pages prev disabled">Anterior</span>',nextlink:(response.paging&&response.paging.nextPage)?this.nextPage(this.pageLink({start:Number(start)+num})):'<span class="nav pages next disabled">Pr&oacute;xima</span>',result:result||"",vejamais:this.pageLink(resetObj)};var html="";html+='<div class="itens-indice uol">\n';html+='<div class="videos">\n';html+="{$result}";html+="</div>\n";html+="</div>\n";if((list&&list.length>0)&&(this.settings.paginacao)){html+='<div class="filtro-indice last ignore">\n';html+="{$prevlink}{$nextlink}\n";html+="</div>\n";}if(this.settings.vejamais&&response["next"]){html+='<span class="vejamais"><a href="{$vejamais}">Veja mais resultados</a></span>\n';}var tmpl=new Lib.UOLBusca.Template(html);return tmpl.compile(obj);};this.parseParams=function(params){var paramTemp=Lib.UOLBusca.Util.copyValidParams(params,this.validParams);paramTemp["sort"]=(params["orderBy"])?params["orderBy"]:"mostRecent";return Lib.UOLBusca.Util.parseToURLSearch(paramTemp);};this.parseQuery=function(string){string=string||"";if(string.indexOf(" ")>-1){string=string.replace(/ /g," AND ");}return string;};this.parseToHTML=function(obj){obj.link=obj.link||"#";obj.title=obj.titulo.replace(/['"]/g,"");var html="";html+="<article";if(obj.imagem){html+=' class="com-imagem"';}html+=">\n";html+='<p><time datetime="{$datetime}">{$data}</time>\n';html+="{$info}</p>\n";html+='<h1><a href="{$link}" title="{$title}">{$titulo}';if(obj.imagem){html+='<img class="thumbnail" src="{$imagem}" title="{$title}" alt="{$title}" width="142" height="100" />';}html+='<img class="icone" src="//img.uol.com.br/_template/v1/icones/video.gif" /></a>';html+='<span class="views">{$visitas} visitas</span>';html+='<span class="coment-counter">{$comments}</span>';html+="</h1>\n";if(obj.descricao){html+="<p>{$descricao}</p>\n";}html+="<footer>\n";html+="<p>\n";if(obj.tags){html+="<strong>Tags:</strong>\n";var arrTags=[];for(o in obj.tags){var linetag='<a href="?term={$description}">{$description}</a>';var linetmpl=new Lib.UOLBusca.Template(linetag);arrTags.push(linetmpl.compile(obj.tags[o]));}if(arrTags.length>1){html+=arrTags.join(", ");}else{if(arrTags.length==1){html+=arrTags[0];}}}html+="</p>\n";html+="</footer>\n";html+="</article>\n";var tmpl=new Lib.UOLBusca.Template(html);return tmpl.compile(obj);};this.onImageError=function(elem){jQuery(elem).parent().css("display","none");return false;};};Lib.UOLBusca.Searcher.Videos.prototype=new Lib.UOLBusca.Searcher();Lib.UOLBusca.Searcher.Movies=function(){this.className="Movies";this.searchUrl=Lib.UOLBusca.URL.MONTECARLO;this.params={repository:"movie",portal:"uol",platform:"web",station:"cinema",fields:"url-uol,imagem,titulo,sinopse,titulo-original,direcao,pais,genero,elenco,ano",callbackName:"jsonp",callback:"Lib.UOLBusca.searchers.{$id}.callback",format:"jsonp",size:"10",charset:"UTF-8"};this.validParams=["repository","portal","platform","station","fields","size","charset","q","next","prev","source"];this.callback=function(data){this.ajaxResponse(data);};this.parser=function(){var response=this.data;var result="";var paginacao=false;var docs=response["docs"]||{};var escopoTipo={"titulo_filme":"título","titulo_original":"título original","diretor":"diretor","elenco":"elenco"};var local="";if(Lib.UOLBusca.params["escopo"]&&(Lib.UOLBusca.params["escopo"]!="q")){local=escopoTipo[Lib.UOLBusca.params["escopo"]]+": ";if(Lib.UOLBusca.params["escopo"].indexOf("genero")!=-1){var genTit=Lib.UOLBusca.params["escopo"].substring(Lib.UOLBusca.params["escopo"].indexOf("genero")+7);local=" no gênero <strong>"+genTit+"</strong>";}}if(docs&&docs.length>0){paginacao=true;result+='<ul id="mod-resultado">\n';for(var i=0;i<docs.length;i++){var item=docs[i];var titulo=item["titulo"];var original=item["titulo-original"];var imagem=item.imagem;var link=item["url-uol"];var direcao=item["direcao"];var pais=item["pais"];var ano=item["ano"];var genero=item["genero"];var page=genero;var str="";if(genero.indexOf(",")!=-1){var arr=genero.split(",");if(arr.length>0){for(var j=0;j<arr.length;j++){page=arr[j].toLowerCase();page=Lib.UOLBusca.Util.removeAccents(page);page=page.replace(/ /g,"-");str+='<a href="http://cinema.uol.com.br/filmes/'+page+'.jhtm">';str+=arr[j]+"</a>";if(j<arr.length-1){str+=", ";}}genero=str;}}else{page=genero.toLowerCase();page=Lib.UOLBusca.Util.removeAccents(page);page=page.replace(/ /g,"-");str+='<a href="http://cinema.uol.com.br/filmes/'+page+'.jhtm">';str+=genero+"</a>";genero=str;}var elenco=item["elenco"];var sinopse=Lib.UOLBusca.Util.textExcerpt(item["sinopse"],300);var obj={link:link,titulo:titulo,original:original,imagem:imagem,sinopse:sinopse,direcao:direcao,pais:pais,genero:genero,elenco:elenco,ano:ano};result+=this.parseToHTML(obj);}result+="</ul>\n";}else{result='<div id="mod-refinamento">\n';result+='<div id="resultado">Não foram encontrados resultados';if(local.length>0){if(local.indexOf("gênero")!=-1){result+=" para <strong>"+Lib.UOLBusca.params["q"]+"</strong>"+local;}else{result+=" com "+local+"<strong>"+Lib.UOLBusca.params["q"]+"</strong>";}}else{result+=" para <strong>"+Lib.UOLBusca.params["q"]+"</strong>";}if(Lib.UOLBusca.params["source"]&&Lib.UOLBusca.params["source"].length>0){if((/dvd/).test(Lib.UOLBusca.params["source"])){if((/bluray/).test(Lib.UOLBusca.params["source"])){result+=" (somente DVD e Blu-ray)";}else{result+=" (somente DVD)";}}else{if((/bluray/).test(Lib.UOLBusca.params["source"])){result+=" (somente Blu-ray)";}}}result+='<div><span><input type="checkbox" name="dvd" onclick="updateSearch()"';if(Lib.UOLBusca.params["source"]&&(/dvd/).test(Lib.UOLBusca.params["source"])){result+=" checked ";}result+="><label>ver somente DVD</label></span> \n";result+='<span><input type="checkbox" name="bluray" onclick="updateSearch()"';if(Lib.UOLBusca.params["source"]&&(/bluray/).test(Lib.UOLBusca.params["source"])){result+=" checked ";}result+="><label>ver somente Blu-ray</label></span></div>\n";result+="</div>\n</div>\n";}var obj={query:Lib.UOLBusca.params["q"],prevlink:(response["prev"])?(this.prevPage(this.pageLink({prev:response["prev"],next:null}))):'<span class="prev">Anterior</span>',nextlink:(response["next"])?(this.nextPage(this.pageLink({next:response["next"],prev:null}))):'<span class="next">Pr&oacute;xima</span>',result:result||""};var html="";if(docs&&docs.length>0){html+='<div id="mod-refinamento">\n';html+='<div id="resultado">Foram encontrados resultados';if(local.length>0){if(local.indexOf("gênero")!=-1){html+=" para <strong>"+Lib.UOLBusca.params["q"]+"</strong>"+local;}else{html+=" com "+local+"<strong>"+Lib.UOLBusca.params["q"]+"</strong>";}}else{html+=" para <strong>"+Lib.UOLBusca.params["q"]+"</strong>";}if(Lib.UOLBusca.params["source"]&&Lib.UOLBusca.params["source"].length>0){if((/dvd/).test(Lib.UOLBusca.params["source"])){if((/bluray/).test(Lib.UOLBusca.params["source"])){html+=" (somente DVD e Blu-ray)";}else{html+=" (somente DVD)";}}else{if((/bluray/).test(Lib.UOLBusca.params["source"])){html+=" (somente Blu-ray)";}}}html+='<div><span><input type="checkbox" name="dvd" onclick="updateSearch()"><label>ver somente DVD</label></span> \n';html+='<span><input type="checkbox" name="bluray" onclick="updateSearch()"><label>ver somente Blu-ray</label></span></div>\n';html+="</div>\n</div>\n";}if(paginacao){html+='<div id="mod-paginacao1" class="mod-paginacao">\n';html+='<div id="box-paginas1" class="box-paginas">\n';html+="<ul><li>{$prevlink} | {$nextlink}</li></ul>\n";html+="</div></div>\n";}html+="{$result}";if(paginacao){html+='<div id="mod-paginacao2" class="mod-paginacao">\n';html+='<div id="box-paginas2" class="box-paginas">\n';html+="<ul><li>{$prevlink} | {$nextlink}</li></ul>\n";html+="</div></div>\n";}var tmpl=new Lib.UOLBusca.Template(html);return tmpl.compile(obj);};this.selectValues={"titulo_filme":"titulo","titulo_original":"titulo-original","diretor":"direcao","elenco":"elenco","genero_Ação":"acao","genero_Animação":"animacao","genero_Aventura":"aventura","genero_Baseado em fatos reais":"baseado AND fatos","genero_Chanchada":"chanchada","genero_Comédia":"comedia","genero_Comédia Romântica":"comedia AND romantica","genero_Cult":"Cult","genero_Documentário":"documentario","genero_Drama":"drama","genero_Erótico":"erotico","genero_Fantasia":"fantasia","genero_Faroeste":"faroeste","genero_Guerra":"guerra","genero_Infantil":"infantil","genero_Musical":"musical","genero_Policial":"policial","genero_Romance":"romance","genero_Suspense":"suspense","genero_Terror":"terror"};this.parseParams=function(params){var paramTemp=Lib.UOLBusca.Util.copyValidParams(params,this.validParams);if(params["escopo"]&&(params["escopo"]!="q")){if(params["escopo"].indexOf("genero")==-1){paramTemp[this.selectValues[params["escopo"]]]=this.parseQuery(paramTemp["q"]);paramTemp["q"]="";paramTemp["sort"]="created:desc";}else{paramTemp["genero"]=this.selectValues[params["escopo"]];paramTemp["q"]=this.parseQuery(paramTemp["q"]);paramTemp["sort"]="created:desc";}}else{paramTemp["q"]=this.parseQuery(paramTemp["q"]);}paramTemp["c"]=paramTemp["q"];paramTemp["q"]="";return Lib.UOLBusca.Util.parseToURLSearch(paramTemp);};this.parseQuery=function(string){string=string||"";if(string.indexOf(" ")>-1){string=string.replace(/ /g," AND ");}return string;};this.parseToHTML=function(obj){obj.link=obj.link||"#";obj.title=obj.titulo.replace(/['"]/g,"");var html='<li class="item filme">\n';var ahref='<a href="{$link}">\n';if(!obj.imagem){obj.imagem="http://ci.i.uol.com.br/filmes/p/filme_p.jpg";}html+='<div class="box-foto">\n';html+=ahref;var img='<img src="{$imagem}" alt="{$title}" title="{$title}">\n';html+=img;html+="</a></div>\n";html+='<div class="box-texto">\n';html+="<h2>"+ahref+"{$titulo} ({$ano})</a></h2>\n";if(obj.sinopse){html+="<p>{$sinopse}</p>\n";}html+='<a href="{$link}" class="url">{$link}</a>\n';html+='<ul class="info">\n';if(obj.original){html+="<li><strong>Título Original:</strong> {$original}</li>\n";}if(obj.diretor){html+="<li><strong>Direção:</strong> {$diretor}</li>\n";}if(obj.elenco){html+="<li><strong>Elenco:</strong> {$elenco}</li>\n";}if(obj.pais){html+="<li><strong>País:</strong> {$pais}</li>\n";}if(obj.genero){html+='<li class="genero"><strong>Gênero:</strong> {$genero}</li>\n';}html+="</ul>\n";html+="</div></li>\n";var tmpl=new Lib.UOLBusca.Template(html);return tmpl.compile(obj);};this.onImageError=function(elem){jQuery(elem).parent().css("display","none");return false;};};Lib.UOLBusca.Searcher.Movies.prototype=new Lib.UOLBusca.Searcher();Lib.UOLBusca.Searcher.Movies.Genero=function(){this.className="MoviesGenero";this.searchUrl=Lib.UOLBusca.URL.MONTECARLO;this.params={repository:"movie",portal:"uol",platform:"web",station:"cinema",fields:"url-uol,imagem,titulo,genero,ano",callbackName:"jsonp",callback:"Lib.UOLBusca.searchers.{$id}.callback",format:"jsonp",size:"20",sort:"created:desc",charset:"UTF-8"};this.validParams=["repository","portal","platform","station","fields","size","charset","next","prev","sort"];this.callback=function(data){this.ajaxResponse(data);};this.parser=function(){var response=this.data;var result="";var paginacao=false;var docs=response["docs"]||{};var genTit="";if(Lib.UOLBusca.params["escopo"]){if(Lib.UOLBusca.params["escopo"].indexOf("genero")!=-1){genTit=Lib.UOLBusca.params["escopo"].substring(Lib.UOLBusca.params["escopo"].indexOf("genero")+7);}}if(docs&&docs.length>0){paginacao=true;result+='<ul id="lista">\n';for(var i=0;i<docs.length;i++){var item=docs[i];var titulo=item["titulo"];var imagem=item.imagem;var link=item["url-uol"];var ano=item["ano"];var genero=item.genero.replace(/,/g,", ");var obj={link:link,titulo:titulo,imagem:imagem,genero:genero,ano:ano};result+=this.parseToHTML(obj);}result+="</ul>\n";}else{result+='<div class="erro">Não foram encontrados filmes com gênero <strong>'+genTit+"</strong></div>\n";result+="</div>\n";}var obj={prevlink:(response["prev"])?(this.prevPage(this.pageLink({prev:response["prev"],next:null}))):'<span class="prev">Anterior</span>',nextlink:(response["next"])?(this.nextPage(this.pageLink({next:response["next"],prev:null}))):'<span class="next">Pr&oacute;xima</span>',result:result||""};var html="";if(paginacao){html+='<div class="ultnot-paginacao-novo">\n';html+='<div class="paginas sem-arquivo"><h4>PÁGINAS</h4></div>';html+='<div class="antprx">\n';html+="{$prevlink} | {$nextlink}\n";html+="</div>\n";html+='<div class="comunicar"><a title="comunicar erro" href="javascript:ShowEnviaErro();"><img alt="" src="//img.uol.com.br/ico_erro.gif"> COMUNICAR ERRO</a></div>';html+="</div>\n";}html+="{$result}";if(paginacao){html+='<div class="ultnot-paginacao-novo ">\n';html+='<div class="paginas sem-arquivo"><h4>PÁGINAS</h4></div>';html+='<div class="antprx">\n';html+="{$prevlink} | {$nextlink}\n";html+="</div>\n";html+='<div class="comunicar"><a title="comunicar erro" href="javascript:ShowEnviaErro();"><img alt="" src="//img.uol.com.br/ico_erro.gif"> COMUNICAR ERRO</a></div>';html+="</div>\n";}var tmpl=new Lib.UOLBusca.Template(html);return tmpl.compile(obj);};this.selectValues={"genero_Acao":"acao","genero_Animacao":"animacao","genero_Aventura":"aventura","genero_Baseado em fatos reais":"baseado AND fatos","genero_Chanchada":"chanchada","genero_Comedia":"comedia","genero_Comedia Romantica":"comedia AND romantica","genero_Cult":"Cult","genero_Documentario":"documentario","genero_Drama":"drama","genero_Erotico":"erotico","genero_Fantasia":"fantasia","genero_Faroeste":"faroeste","genero_Ficcao Cientifica":"ficcao AND cientifica","genero_Guerra":"guerra","genero_Infantil":"infantil","genero_Musical":"musical","genero_Policial":"policial","genero_Romance":"romance","genero_Suspense":"suspense","genero_Terror":"terror"};this.parseParams=function(params){var paramTemp=Lib.UOLBusca.Util.copyValidParams(params,this.validParams);if(params["escopo"]){paramTemp["genero"]=this.selectValues[params["escopo"]];if(!paramTemp["genero"]){paramTemp["genero"]="acao";}}return Lib.UOLBusca.Util.parseToURLSearch(paramTemp);};this.parseQuery=function(string){string=string||"";if(string.indexOf(" ")>-1){string=string.replace(/ /g," AND ");}return string;};this.parseToHTML=function(obj){obj.link=obj.link||"#";obj.title=obj.titulo.replace(/['"]/g,"");var html="<li>\n";var ahref='<a href="{$link}">\n';if(!obj.imagem){obj.imagem="http://ci.i.uol.com.br/filmes/p/filme_p.jpg";}html+=ahref;var img='<img src="{$imagem}" alt="{$title}" title="{$title}">\n';html+=img;html+="</a>\n";html+="<h2>"+ahref+"{$genero}</a></h2>\n";html+="<h3>"+ahref+"<strong>{$titulo}</strong></a></h3>\n";html+="<div>"+ahref+"{$ano}</a></div>\n";html+="</li>\n";var tmpl=new Lib.UOLBusca.Template(html);return tmpl.compile(obj);};this.onImageError=function(elem){jQuery(elem).parent().css("display","none");return false;};};Lib.UOLBusca.Searcher.Movies.Genero.prototype=new Lib.UOLBusca.Searcher();Lib.UOLBusca.Searcher.Tagpages=function(){this.className="Tagpages";this.searchUrl=Lib.UOLBusca.URL.MONTECARLO;this.params={repository:"specialpage",fields:"url-uol,titulo,station,imagem,imagem-credito,repository,descricao",size:5,callbackName:"jsonp",callback:"Lib.UOLBusca.searchers.{$id}.callback",portal:"uol",format:"jsonp"};this.validParams=["repository","fields","d","size","portal"];this.callback=function(data){this.ajaxResponse(data);};this.parser=function(){var response=this.data;var result="";var docs=response["docs"]||{};if(docs&&docs.length>0){var header=(docs.length>1)?"Páginas":"Página";result+="<header><h1>"+header+"</h1></header>\n";result+='<ul class="tagpage">\n';var par=(docs.length%2==0);for(var i=0;i<docs.length;i++){var item=docs[i];var titulo=item["titulo"];var imagem=(jQuery.trim(item["imagem"]));var credito=item["imagem-credito"];var station=item.station;if(station&&(station.length>0)&&(station.indexOf("UOL")==-1)){station="UOL "+station;}var link=item["url-uol"];var repository=item.repository;var descricao=Lib.UOLBusca.Util.textExcerpt(item.descricao,80);var objItem={titulo:titulo,imagem:imagem,credito:credito,link:link,station:station,repository:repository,descricao:descricao};if((!par)&&(i==docs.length-1)){objItem.classname="lastodd";}result+=this.parseToHTML(objItem);}result+="</ul>\n";}return result;};this.parseParams=function(params){var paramTemp=Lib.UOLBusca.Util.copyValidParams(params,this.validParams);if(Lib.UOLBusca.params["tag-id"]&&Lib.UOLBusca.params["tag-id"].length>0){this.searchUrl=Lib.UOLBusca.URL.TAGPAGES;paramTemp["repository"]="tagpage";paramTemp["portal"]="uol";paramTemp["tags-id"]=Lib.UOLBusca.params["tag-id"];paramTemp["q"]=this.parseQuery(Lib.UOLBusca.params["q"]);paramTemp["titulo"]=this.parseQuery(Lib.UOLBusca.params["q"]);}else{paramTemp["d"]=this.parseQuery(Lib.UOLBusca.params["q"]);}return Lib.UOLBusca.Util.parseToURLSearch(paramTemp);};this.parseQuery=function(string){string=string||"";string=string.replace(/^\s+|\s+$/g,"");if(string.indexOf(" ")>-1){string=string.replace(/ /g," AND ");}return string;};this.parseToHTML=function(obj){var classname=obj.repository;classname+=(obj.classname)?" "+obj.classname:"";var html='<li class = "'+classname+'"><div';html+=">\n";obj.title=obj.titulo.replace(/['"]/g,"");html+='<a title="{$title}" href="{$link}">\n';if(obj.imagem){var url=(jQuery.trim(obj.imagem).match(/[0-9]{13}_\d+x\d+/))?jQuery.trim(obj.imagem).replace(/\d+x\d+/,"80x80"):jQuery.trim(obj.imagem);html+=Lib.UOLBusca.Util.writeTagImage(url,this.settings.imageWidth,this.settings.imageHeight,this.settings.cropWidth,this.settings.cropHeight,obj.credito,"Lib.UOLBusca.searchers."+this.id+".onImageError","image",true,"onload='Lib.UOLBusca.searchers."+this.id+".onImageLoad(this)'");}else{html+='<span class="image'+this.settings.imageWidth+"x"+this.settings.imageHeight+' image" style="display:none"></span>\n';}var className=(obj.imagem)?"":" sem-foto";html+='<span class="titulo'+className+'"><strong>{$titulo}</strong>';if(obj.station){html+="<br />Em {$station}";}if((obj.repository=="product")&&(obj.descricao)){html+="<br />{$descricao}";}html+="</span>\n";html+="</a>\n";html+='<span class="radio'+className+'" title="{$titulo}"></span>\n';html+="</div></li>\n";var tmpl=new Lib.UOLBusca.Template(html);return tmpl.compile(obj);};this.onImageError=function(elem){var url=jQuery(elem).attr("src");var img=new Lib.UOLBusca.UOLImagem(url,80,80,"80x80","80x80;142x100;",false);jQuery(img).bind("image_loaded",function(self){var container='ul.tagpage li span.image img[src="'+this.src+'"]';var html=this.write();if(jQuery(container).get().length>0){jQuery(container).parent().html(html);jQuery("ul.tagpage li.tagpage").find('img[src="'+url+'"]').parent().css("background","none");jQuery("ul.tagpage li.tagpage").find('img[src="'+url+'"]').parent().parent().css("background","none");}else{setTimeout((function(self){return function(){var container='ul.tagpage li span.image img[src="'+self.src+'"]';var html=self.write();if(jQuery(container).get().length>0){jQuery(container).parent().html(html);jQuery("ul.tagpage li.tagpage").find('img[src="'+url+'"]').parent().css("background","none");jQuery("ul.tagpage li.tagpage").find('img[src="'+url+'"]').parent().parent().css("background","none");}};})(this),1000);}});img.load();};this.onImageLoad=function(elem){var url=jQuery(elem).attr("src");var credito=jQuery(elem).attr("title");var img=new Image();img.src=url;var imgW=jQuery(elem).attr("imgW");imgW=(imgW)?Number(imgW):0;var imgH=jQuery(elem).attr("imgH");imgH=(imgH)?Number(imgH):0;if((img.width!=imgW)&&(img.height!=imgH)){var html=Lib.UOLBusca.Util.writeTagImage(url,img.width,img.height,this.settings.cropWidth,this.settings.cropHeight,credito,"","image",true);jQuery(elem).parent().html(html);}jQuery("ul.tagpage li.tagpage").find('img[src="'+url+'"]').parent().css("background","none");jQuery("ul.tagpage li.tagpage").find('img[src="'+url+'"]').parent().parent().css("background","none");};};Lib.UOLBusca.Searcher.Tagpages.prototype=new Lib.UOLBusca.Searcher();Lib.UOLBusca.Searcher.Radio=function(string){this.className="Radio";this.name=string.toLowerCase().replace(/[^a-z]/gi,"");this.className="Radio";this.searchWord=string;this.searchUrl="http://www.radio.uol.com.br/suggestion/"+this.searchWord+".ws";this.params={scope:"artist",contentType:"application/jsonp; charset=utf-8",callbackName:"callback",callback:"Lib.UOLBusca.radioQueries."+this.name+".callback",format:"jsonp"};this.validParams=["scope","contentType"];this.callback=function(data){this.ajaxResponse(data);};this.parser=function(){var response=this.data;var result="<!-- // OK -->";var suggestion=(response.category&&response.category.length>0)?response.category[0].suggestion:{};if(suggestion&&suggestion.length>0){for(var i=0;i<suggestion.length;i++){var item=suggestion[i];var titulo=item["@name"];if(titulo==this.searchWord){var link="http://www.radio.uol.com.br/busca/"+titulo;var objItem={titulo:titulo,link:link};result=this.parseToHTML(objItem);}break;}}return result;};this.parseParams=function(params){var paramTemp=Lib.UOLBusca.Util.copyValidParams(params,this.validParams);return Lib.UOLBusca.Util.parseToURLSearch(paramTemp);};this.parseToHTML=function(obj){var html='<a href="{$link}"><strong>{$titulo}</strong> na Rádio UOL</a>\n';var tmpl=new Lib.UOLBusca.Template(html);return tmpl.compile(obj);};};Lib.UOLBusca.Searcher.Radio.prototype=new Lib.UOLBusca.Searcher();Lib.UOLBusca.Searcher.GoogleAds=function(){this.className="GoogleAds";this.searchUrl=Lib.UOLBusca.URL.GOOGLEADS;this.params={adsonly:"true",callbackName:"jsonp",callback:"Lib.UOLBusca.searchers.{$id}.callback",contentType:"application/json; charset=ISO-8859-1",format:"jsonp"};this.validParams=["q","adsonly","format"];this.callback=function(data){this.ajaxResponse(data);};this.ads=[];this.parser=function(){var response=this.data;var html="";var adlinks=response["adlinks"]||[];html=Lib.UOLBusca.GoogleAdsUtil.parseAds(adlinks,this.settings.containersAds,this.settings.adsQty);if(typeof(html)!="string"){this.ads=html;html="<!--// OK -->";}return html;};this.parseParams=function(params){var validparams=Lib.UOLBusca.Util.copyValidParams(params,this.validParams);validparams["start"]=Lib.UOLBusca.params["pageads"];if(params["tag-texto"]&&(params["tag-texto"].length>0)){validparams["q"]=params["tag-texto"];}return Lib.UOLBusca.Util.parseToURLSearch(validparams);};};Lib.UOLBusca.Searcher.GoogleAds.prototype=new Lib.UOLBusca.Searcher();Lib.UOLBusca.GoogleAdsUtil={parseAds:function(adlinks,containersAds,adsQty){if(Lib.UOLBusca.params["base"]=="googleimages"){return"";}var result=[];var html="";if(adlinks&&adlinks.length>0){for(var i=0;i<adlinks.length;i++){var obj={url:adlinks[i].url,visible_url:adlinks[i].visible_url,line1:adlinks[i].line1,line2:adlinks[i].line2};result.push(Lib.UOLBusca.GoogleAdsUtil.parseAdsToHTML(obj));}}var tmplHtml="";tmplHtml+="<h3>Links Patrocinados</h3>\n";tmplHtml+="<ul>\n";tmplHtml+="{$result}";tmplHtml+="</ul>";var tmpl=new Lib.UOLBusca.Template(tmplHtml);if(result&&(result.length>0)){if(containersAds&&(containersAds.length>0)){var ads=[];var total=0;for(var a in containersAds){total+=adsQty[a];}var pos=0;if(adlinks.length>0){for(var i in containersAds){var qty=adsQty[i];var part=result.slice(pos,pos+qty);if(part.length>0){var obj={result:part.join("")};ads.push(tmpl.compile(obj));pos+=qty;}}}return ads;}else{if(adlinks.length>0){var obj={result:(result)?result.join(""):" "};html+=tmpl.compile(obj);}}}return html;},parseAdsToHTML:function(obj){var html='<li><a href="{$url}" target="_blank">\n';html+="<strong>{$line1}</strong></a><br />\n";html+="<em>{$line2}</em><br />\n";html+='<span><a href="{$url}" target="_blank">{$visible_url}</a></span><br />\n';html+="</a></li>";var tmpl=new Lib.UOLBusca.Template(html);return tmpl.compile(obj);}};Lib.UOLBusca.Searcher.ImagensUOL=function(){this.className="ImagensUOL";this.searchUrl=Lib.UOLBusca.URL.MONTECARLO_VELOCITY;this.params={repository:"image",callbackName:"jsonp",callback:"Lib.UOLBusca.searchers.{$id}.callback",format:"jsonp",size:"40"};this.dataType="html";this.validParams=["repository","station","size","q","next","prev","created","paging","tag-id","tag-texto"];this.callback=function(data){this.ajaxResponse(data);};this.parseParams=function(params){var paramTemp=Lib.UOLBusca.Util.copyValidParams(params,this.validParams);paramTemp["query"]=paramTemp["q"];paramTemp["q"]=this.parseQuery(paramTemp["q"]);return Lib.UOLBusca.Util.parseToURLSearch(paramTemp);};this.parseQuery=function(string){string=string||"";if(string.indexOf(" ")>-1){string=string.replace(/ /g," AND ");}return string;};this.onImageError=function(elem){jQuery(elem).parent().css("display","none");jQuery(elem).parent().parent().attr("onmouseover","");jQuery(elem).parent().parent().attr("onclick","");jQuery(elem).parent().parent().mouseover(null);jQuery(elem).parent().parent().click(null);return false;};this.onImageClick=function(elem){Lib.UOLBusca.Modal.show(jQuery(elem).parent().find("div.details a"));return false;};this.onImageLoad=function(elem,cropWidth,cropHeight){cropWidth=cropWidth||this.settings.cropWidth;cropHeight=cropHeight||this.settings.cropHeight;var url=jQuery(elem).attr("src");var credito=jQuery(elem).attr("title");var img=new Image();img.src=url;var imgW=jQuery(elem).attr("imgW");imgW=(imgW)?Number(imgW):0;var imgH=jQuery(elem).attr("imgH");imgH=(imgH)?Number(imgH):0;if(url.match(/\/\/s.i.uol.com.br/g)==null){var html=Lib.UOLBusca.Util.writeTagImage(url,img.width,img.height,cropWidth,cropHeight,credito,"","image",true);var parent=(jQuery(elem).parent().attr("tagName")=="SPAN")?jQuery(elem).parent().parent():jQuery(elem).parent();parent.html(html);}else{jQuery(elem).parent().css("display","none");jQuery(elem).parent().parent().attr("onmouseover","");jQuery(elem).parent().parent().attr("onclick","");jQuery(elem).parent().parent().mouseover(null);jQuery(elem).parent().parent().click(null);}};this.onImageMediaLoad=function(elem){this.onImageLoad(elem,300,300);};};Lib.UOLBusca.Searcher.ImagensUOL.prototype=new Lib.UOLBusca.Searcher();Lib.UOLBusca.Modal={IMGWAIT:"http://c.imguol.com/busca/wait.gif",IMGFECHAR:"http://c.imguol.com/busca/uolbusca-btn-fechar.png",maxWidth:Math.round((70/100)*jQuery(window).width()),maxHeight:Math.round((70/100)*jQuery(window).height()),isOpen:false,isLoaded:false,fixedSize:true,width:0,height:0,curr:null,interval:null,handleOver:function(elem){if(Lib.UOLBusca.Modal.timeout){clearTimeout(Lib.UOLBusca.Modal.timeout);}if(jQuery(".indice article.selected")){jQuery(".indice article.selected").removeClass("selected");}jQuery(elem).parent().addClass("selected");var href=jQuery(elem).next().find("a.image-media").attr("href");var publisher=jQuery(elem).attr("publisher");var isAlbum=(publisher&&(publisher=="UOL.Álbum"));if(isAlbum){jQuery(elem).next().find("a.image-media").click(Lib.UOLBusca.Modal.handleClick);}else{var tamanhos=jQuery(elem).next().find("a.image-media").attr("tamanhos");var imagem=new Lib.UOLBusca.UOLImagem(href,300,300,"300x300",tamanhos,isAlbum);imagem.container=jQuery(elem).next().find("a.image-media");jQuery(imagem).bind("image_loaded",function(){var html=this.write();jQuery(this.container).html(html);jQuery(this.container).click(Lib.UOLBusca.Modal.handleClick);});imagem.load();}var items=jQuery("div.images article");if(items){var alt=(Math.round(items.length/4)*110);var sum=(jQuery(elem).parent().position().top+jQuery(elem).next().height()-16);var dif=(sum-alt);dif=Math.round(344-dif);if(dif<0){jQuery(elem).next().css("top",dif+"px");}}Lib.UOLBusca.Modal.handleOut(jQuery(".indice article.selected div"));Lib.UOLBusca.Modal.handleOut(jQuery(".details").parent().parent());},handleClick:function(elem){elem=(jQuery(this))?jQuery(this):jQuery(elem);Lib.UOLBusca.Modal.show(elem);return false;},timeout:null,handleOut:function(elem){jQuery(elem).mouseout(function(e){clearTimeout(Lib.UOLBusca.Modal.timeout);Lib.UOLBusca.Modal.timeout=setTimeout(function(){clearTimeout(Lib.UOLBusca.Modal.timeout);if(jQuery(".indice article.selected")){jQuery(".indice article.selected").removeClass("selected");}},500);});jQuery(elem).mouseover(function(e){if(Lib.UOLBusca.Modal.timeout){clearTimeout(Lib.UOLBusca.Modal.timeout);}});},imageResize:function(){this.maxWidth=Math.round((70/100)*jQuery(window).width());this.maxHeight=Math.round((80/100)*jQuery(window).height());if(this.isLoaded){var imgsize=this.getImageSize();this.imagePosition(imgsize);}},getImageSize:function(){var w=this.maxWidth;var h=this.maxHeight;if((this.width<w)&&(this.height<h)){w=this.width;h=this.height;}else{if(this.width>this.height){w=this.maxWidth;h=this.height/this.width*w;if(h>this.maxHeight){h=this.maxHeight;w=this.width/this.height*h;}}else{h=this.maxHeight;w=this.width/this.height*h;if(w>this.maxHeight){w=this.maxWidth;h=this.height/this.width*w;}}}w=Math.round(w);h=Math.round(h);return{width:w,height:h};},hide:function(){this.isOpen=false;FullOpacity.hide();jQuery("body .lightbox .modal-contents").html("");this.isLoaded=false;},show:function(element){if(!jQuery("#modal").hasClass("FullOpacityPopUpFixed")){FullOpacity.show("modal");this.isOpen=true;}element=jQuery(element);if(element.length>1){element=element.eq(0);}var info=element.parent().parent().find(".info").html();var title=element.parent().parent().find(".title").html();var credito=element.attr("title");Lib.UOLBusca.Modal.curr=element;var href=element.attr("href");if(!jQuery.trim(href).match(/[0-9]{13}_\d+x\d+/)){if(jQuery.trim(href).match(/[0-9]{13}/)){var tamanhos=element.attr("tamanhos");var maxSize=Lib.UOLBusca.Util.getMaxSize(tamanhos);href=href.substring(0,href.lastIndexOf("."))+"_"+maxSize+href.substring(href.lastIndexOf("."));}}Lib.UOLBusca.Modal.showImage(href,info,title,credito);},showModalTimed:function(){if(Lib.UOLBusca.openModal){Lib.UOLBusca.Modal.interval=window.setInterval(function(){var href=Lib.UOLBusca.openModal;var element=jQuery('p.image a.uol-search-image-modal[href="'+href+'"]');var info=element.parent().parent().children(".info").html();if(info!=null){clearInterval(Lib.UOLBusca.Modal.interval);window.UOLSearch.Views.showModal(element);window.UOLSearch.Definitions.openModal=null;}},1000);}},showImage:function(url,info,title,credito){var img=new Image();img.src=url;if(img.width!=0){Lib.UOLBusca.Modal.insertImage(img,url,info,title,credito);}else{Lib.UOLBusca.Modal.showPreloader();}img.onload=function(){Lib.UOLBusca.Modal.insertImage(img,url,info,title,credito);};},insertImage:function(img,url,info,title,credito){this.isLoaded=true;this.width=img.width;this.height=img.height;if(jQuery(this.curr.parent().parent().prev().children()[1]).hasClass("details")){jQuery("#modal a.modal-btn-prev").css("display","block");jQuery("#modal a.modal-btn-prev").attr("href","javascript:Lib.UOLBusca.Modal.showPrevImage()");}else{jQuery("#modal a.modal-btn-prev").css("display","none");}if(jQuery(this.curr.parent().parent().next().children()[1]).hasClass("details")){jQuery("#modal a.modal-btn-next").css("display","block");jQuery("#modal a.modal-btn-next").attr("href","javascript:Lib.UOLBusca.Modal.showNextImage()");}else{jQuery("#modal a.modal-btn-next").css("display","none");}credito=credito.replace(/['"]/g,"");var source='<p class="image"><img src="'+url+'" title="'+credito+'" alt="'+credito+'" /></p>\n';source+='<p class="info">'+info+"</p>\n";source+='<p class="title">'+title+"</p>";jQuery("#modal .modal-contents").html(source);this.imagePosition();},imagePosition:function(){var imgsize=this.getImageSize();var w=imgsize.width;var h=imgsize.height;jQuery("#modal .modal-contents p.image img").attr("width",w);jQuery("#modal .modal-contents p.image img").attr("height",h);var winW=w;var winH=h;if(this.fixedSize){winW=this.maxWidth;winH=this.maxHeight;jQuery(".modal-contents p.image").css("width",winW+"px");jQuery(".modal-contents p.image").css("height",winH+"px");if(winW>w){jQuery(".modal-contents p.image img").css("left",Math.round((winW-w)/2)+"px");}else{jQuery(".modal-contents p.image img").css("left","0");}if(winH>h){jQuery(".modal-contents p.image img").css("top",Math.round((winH-h)/2)+"px");}else{jQuery(".modal-contents p.image img").css("top","0");}jQuery(".modal-contents p.image img").css("position","relative");jQuery(".modal-nav").css("width",this.maxWidth+"px");jQuery("#modal a.modal-btn-prev").css("min-height",this.maxHeight+"px");jQuery("#modal a.modal-btn-next").css("min-height",this.maxHeight+"px");jQuery(".modal-contents p.title").css("max-width",this.maxWidth+"px");}else{jQuery(".modal-nav").css("width",winW+"px");jQuery("#modal a.modal-btn-prev").css("min-height",winH+"px");jQuery("#modal a.modal-btn-next").css("min-height",winH+"px");jQuery(".modal-contents p.title").css("max-width",winW+"px");}var css="#modal img{max-width:"+w+"px; max-height:"+h+"px}";css+="#modal a.modal-btn-prev,.modal a.modal-btn-next{min-height:"+h+"px}";if(jQuery("#cssmodal")){jQuery("#cssmodal").html(css);}else{jQuery(document.body).append('<style id="cssmodal">'+css+"</style>");}if(this.isOpen){FullOpacity.setPosition();}},showPreloader:function(){this.isLoaded=false;this.isOpen=true;jQuery("#modal a.modal-btn-prev").css("display","none");jQuery("#modal a.modal-btn-next").css("display","none");var html='<div class="carregando"><img src="'+this.IMGWAIT+'" width="32" height="32" />\n<br />\n<span>Carregando imagem</span></div>';if(this.fixedSize){html='<div class="frame">'+html+"</div>";jQuery("#modal .modal-contents").html(html);jQuery(".modal-contents .frame").css("width",this.maxWidth+"px");jQuery(".modal-contents .frame").css("height",this.maxHeight+"px");jQuery(".modal-contents .frame").css("background","#1c1817");jQuery(".modal-contents .carregando").css("padding","0");jQuery(".modal-contents .carregando").css("position","relative");jQuery(".modal-contents .carregando img").css("padding","10px");var divH=Number(jQuery("#modal .modal-contents .carregando").height())+20;var divW=130;jQuery(".modal-contents .carregando").css("width",divW+"px");jQuery(".modal-contents .carregando").css("top",Math.round((this.maxHeight-divH)/2)+"px");jQuery(".modal-contents .carregando").css("left",Math.round((this.maxWidth-divW)/2)+"px");}else{jQuery("#modal .modal-contents").html(html);}FullOpacity.setPosition();},showPrevImage:function(){if(this.curr!=null){var prev=jQuery(Lib.UOLBusca.Modal.curr.parent().parent().prev().find("a.image-media"));Lib.UOLBusca.Modal.show(prev);}},showNextImage:function(){if(this.curr!=null){var next=jQuery(Lib.UOLBusca.Modal.curr.parent().parent().next().find("a.image-media"));Lib.UOLBusca.Modal.show(next);}},init:function(){var source='<div id="modal">\n';source+='<a class="modal-btn-fechar" href="javascript:Lib.UOLBusca.Modal.hide()"><img src='+this.IMGFECHAR+" /></a>\n";source+='<div class="modal-contents"></div>\n';source+='<div class="modal-nav">\n';source+='<a class="modal-btn-prev" href="#"></a>\n';source+='<a class="modal-btn-next" href="#"></a>\n';source+="</div></div>";jQuery("body").prepend(source);}};Lib.UOLBusca.Suggest={MINCHARS:2,field:{},container:{},queries:{},radioQueries:{},visible:false,timer:null,rollTimer:null,selected:null,last:null,init:function(field,container){this.field=jQuery(field);jQuery(field).attr("autocomplete","off");var form=jQuery(field).parents("form");this.action=(form.attr("action"));this.initContainer(container);jQuery(field).keyup(function(e){if(e.keyCode==13){if((Lib.UOLBusca.Suggest.visible)&&((Lib.UOLBusca.Suggest.selected!=null)&&(jQuery(Lib.UOLBusca.Suggest.selected).get(0)!=undefined))){var sel=jQuery(Lib.UOLBusca.Suggest.selected);if(sel.get(0).tagName=="SPAN"){if(sel.hasClass("titulo")){location.href=jQuery(sel).parent().attr("href");}else{location.href=jQuery(sel).find("a").attr("href");}}else{var id=jQuery(sel).attr("id");var queryurl="?term="+jQuery(Lib.UOLBusca.Suggest.field).val();switch(id){case"buscauol":if((location.href.indexOf("busca")==-1)&&(Lib.UOLBusca.Suggest.action)){location.href=Lib.UOLBusca.Suggest.action+queryurl+"&searchon=uol&type=all";}else{Lib.UOLBusca.refresh(queryurl+"&searchon=uol&type=all",true);}break;case"buscaweb":if((location.href.indexOf("busca")==-1)&&(Lib.UOLBusca.Suggest.action)){location.href=Lib.UOLBusca.Suggest.action+queryurl;}else{Lib.UOLBusca.refresh(queryurl,true);}break;}}}else{var form=jQuery(Lib.UOLBusca.Suggest.field).parent();var val=jQuery(Lib.UOLBusca.Suggest.field).val();if(val&&(val.length>Lib.UOLBusca.Suggest.MINCHARS)){form.submit();}}}else{if((e.keyCode==38)||(e.keyCode==40)){Lib.UOLBusca.Suggest.navigation(e.keyCode);}else{if((e.keyCode==37)||(e.keyCode==39)){Lib.UOLBusca.Suggest.setSelected();}else{if(e.keyCode==27){Lib.UOLBusca.Suggest.close(true);}else{var val=jQuery(Lib.UOLBusca.Suggest.field).val();if(val&&(val.length>Lib.UOLBusca.Suggest.MINCHARS)){if(val!=Lib.UOLBusca.Suggest.last){Lib.UOLBusca.Suggest.update();}Lib.UOLBusca.Suggest.show();if(this.timer){clearTimeout(this.timer);}this.timer=setTimeout(function(){var val=jQuery(Lib.UOLBusca.Suggest.field).val();if(val&&(val.length>Lib.UOLBusca.Suggest.MINCHARS)){if(val!=Lib.UOLBusca.Suggest.last){}}},200);}else{Lib.UOLBusca.Suggest.close();}}}}}});jQuery(field).blur(function(){Lib.UOLBusca.Suggest.close();});jQuery(field).click(function(){var val=jQuery(Lib.UOLBusca.Suggest.field).val();if(val&&(val.length>Lib.UOLBusca.Suggest.MINCHARS)){if(Lib.UOLBusca.Suggest.last!=val){Lib.UOLBusca.Suggest.update();}else{Lib.UOLBusca.Suggest.show();}}else{Lib.UOLBusca.Suggest.close();}});},initContainer:function(container){if(container){this.suggest=jQuery(container);}else{jQuery(this.field).parent().append("<div id='suggest'></div>");this.container=jQuery("#suggest");}jQuery(this.container).append("<ul></ul>");var form=jQuery(this.field).parent().parent().find("form");jQuery(this.container).css("top",(jQuery(form).find("input[type=submit]").height()+1)+"px");jQuery(this.container).css("left",jQuery(this.field).css("left"));console.log("Log 1: "+jQuery(this.container));console.log("Log 2: "+jQuery(this.field));this.update();},update:function(){var val=jQuery(this.field).val();if(val&&(val.length>Lib.UOLBusca.Suggest.MINCHARS)){val=val.replace(/^\s+|\s+$/g,"");val=val.replace(/</g,"&lt;");val=val.replace(/>/g,"&gt;");var obj={buscaUOL:"'<strong>"+val+"</strong>' no UOL ›",buscaWeb:"'<strong>"+val+"</strong>' na Web ›"};var html="";html+='<li class="busca" id="buscauol">{$buscaUOL}</li>';html+='<li class="busca" id="buscaweb">{$buscaWeb}</li>';var tmpl=new Lib.UOLBusca.Template(html);var r=tmpl.compile(obj);jQuery(this.container).find("ul").eq(0).html(r);this.updateEvent();}},show:function(){clearTimeout(this.rollTimer);if(!jQuery(this.container).hasClass("show")){jQuery(this.container).addClass("show");}this.visible=true;},close:function(skip){clearTimeout(this.timer);clearTimeout(Lib.UOLBusca.Suggest.rollTimer);if(skip){Lib.UOLBusca.Suggest.hide();}else{this.rollTimer=setTimeout(function(){Lib.UOLBusca.Suggest.hide();},500);}},hide:function(){Lib.UOLBusca.Suggest.setSelected();if(jQuery(Lib.UOLBusca.Suggest.container).hasClass("show")){jQuery(Lib.UOLBusca.Suggest.container).removeClass("show");}Lib.UOLBusca.Suggest.visible=false;},navigation:function(keyCode){if(this.visible){var first=jQuery(this.container).find("li").eq(0);var navTo=(keyCode==38)?-1:1;var lis=jQuery(this.container).find("li");if(lis.length){if(this.selected&&jQuery(this.selected)){var sel=Lib.UOLBusca.Suggest.selected;if(navTo==-1){var prev=jQuery(sel).prev();if((jQuery(sel).get(0))&&(jQuery(sel).get(0).tagName=="SPAN")){if(jQuery(sel).hasClass("titulo")){sel=jQuery(sel).parent().parent();prev=jQuery(sel).prev();if(prev.hasClass("suggest-tagpage")){if(jQuery(prev).eq(0).find("span.radio").find("a").length>0){this.setSelected(jQuery(prev).eq(0).find("span.radio"));}else{this.setSelected(jQuery(prev).eq(0).find("span.titulo"));}}else{this.setSelected(prev);}}else{this.setSelected(jQuery(sel).parent().find("span.titulo"));}}else{if((prev.get(0))&&(prev.get(0).tagName=="LI")){if(prev.hasClass("suggest-tagpage")){if(jQuery(prev).eq(0).find("span.radio").find("a").length>0){this.setSelected(jQuery(prev).find("span.radio"));}else{this.setSelected(jQuery(prev).find("span.titulo"));}}else{this.setSelected(prev);}}else{var last=lis.length-1;var selectLast=lis.eq(last);this.setSelected(selectLast);}}}else{var next=jQuery(sel).next();if((jQuery(sel).get(0))&&(jQuery(sel).get(0).tagName=="SPAN")){if(jQuery(sel).hasClass("titulo")){sel=jQuery(sel).parent().parent();if(jQuery(sel).find("span.radio").find("a").length>0){this.setSelected(jQuery(sel).find("span.radio"));}else{next=jQuery(sel).next();if(next.hasClass("suggest-tagpage")){this.setSelected(jQuery(next).find("span.titulo"));}else{this.setSelected(next);}}}else{next=jQuery(sel).parent().next();if(next.hasClass("suggest-tagpage")){this.setSelected(jQuery(next).find("span.titulo"));}else{this.setSelected(next);}}}else{if(next.get(0)&&(next.get(0).tagName=="LI")){if(next.hasClass("suggest-tagpage")){this.setSelected(jQuery(next).find("span.titulo"));}else{this.setSelected(next);}}else{if(first.hasClass("suggest-tagpage")){this.setSelected(jQuery(first).find("span.titulo"));}else{this.setSelected(first);}}}}}else{if(navTo==-1){var last=lis.length-1;var selectLast=lis.eq(last);this.setSelected(selectLast);}else{if(first.hasClass("suggest-tagpage")){this.setSelected(jQuery(first).find("span.titulo"));}else{this.setSelected(first);}}}}}},insert:function(tagcode){this.update();html=tagcode||"";jQuery(this.container).find("ul").eq(0).prepend(html);jQuery(this.container).find("li.suggest-tagpage span.radio").each(function(){var str=jQuery(this).parent().find("strong").text();var radio=new Lib.UOLBusca.Suggest.RadioSearch(str);jQuery(radio).bind("searcher_loaded",function(event,radio){var html=this.parser();if(html.indexOf("a href")!=-1){jQuery(Lib.UOLBusca.Suggest.container).find('span.radio[title="'+this.searchWord+'"]').each(function(){if(!jQuery(this).parent().hasClass("com-radio")){jQuery(this).parent().addClass("com-radio");}jQuery(this).html(html);});}});radio.process();Lib.UOLBusca.Suggest.radioQueries[radio.name]=radio;});this.updateEvent();},updateEvent:function(){jQuery(this.container).find("li").each(function(){if(jQuery(this).hasClass("busca")){jQuery(this).mouseover(function(){Lib.UOLBusca.Suggest.setSelected(jQuery(this));});}else{jQuery(this).find("span").each(function(){jQuery(this).mouseover(function(){Lib.UOLBusca.Suggest.setSelected(jQuery(this));});});}jQuery(this).mouseout(function(){Lib.UOLBusca.Suggest.close();});jQuery(this).click(function(){if(jQuery(this).hasClass("busca")){var id=jQuery(this).attr("id");var queryurl="?term="+jQuery(Lib.UOLBusca.Suggest.field).val();switch(id){case"buscauol":if((location.href.indexOf("busca")==-1)&&(Lib.UOLBusca.Suggest.action)){location.href=Lib.UOLBusca.Suggest.action+queryurl+"&type=all&searchon=uol";}else{Lib.UOLBusca.refresh(queryurl+"&type=all&searchon=uol",true);}break;case"buscaweb":if((location.href.indexOf("busca")==-1)&&(Lib.UOLBusca.Suggest.action)){location.href=Lib.UOLBusca.Suggest.action+queryurl;}else{Lib.UOLBusca.refresh(queryurl,true);}break;}}});});},setSelected:function(selection){Lib.UOLBusca.Suggest.show();if(selection){if(!jQuery(selection).hasClass("selected")){if(this.selected){jQuery(this.selected).removeClass("selected");}jQuery(selection).addClass("selected");this.selected=jQuery(selection);}}else{if(this.selected){jQuery(this.selected).removeClass("selected");}this.selected=null;}},process:function(){var val=jQuery(Lib.UOLBusca.Suggest.field).val();var namequery=val.toLowerCase().replace(/[^a-z]/gi,"");Lib.UOLBusca.Suggest.queries[namequery]=new Lib.UOLBusca.Suggest.TagpageSearch(namequery);var tagpage=Lib.UOLBusca.Suggest.queries[namequery];tagpage.settings=new Lib.UOLBusca.Searcher.Settings(jQuery(this.container));jQuery(tagpage).bind("searcher_loaded",function(event,tagpage){var palavra=jQuery(Lib.UOLBusca.Suggest.field).val();if(this.params["q"]==palavra){var html=this.parser();if(html.length>1){Lib.UOLBusca.Suggest.insert(html);}Lib.UOLBusca.Suggest.show();Lib.UOLBusca.Suggest.last=palavra;}});tagpage.params["q"]=val;tagpage.process();}};Lib.UOLBusca.Suggest.TagpageSearch=function(name){this.name=name;this.searchUrl=Lib.UOLBusca.URL.MONTECARLO;this.params={repository:"specialpage",fields:"url-uol,titulo,station,channel,imagem,imagem-credito,repository,descricao",callbackName:"jsonp",callback:"Lib.UOLBusca.Suggest.queries."+name+".callback",portal:"uol",format:"jsonp",size:"5"};this.validParams=["repository","fields","d","size","portal"];this.callback=function(data){this.ajaxResponse(data);};this.parser=function(){var response=this.data;var result="";var docs=response["docs"]||{};if(docs&&docs.length>0){for(var i=0;i<docs.length;i++){var item=docs[i];var titulo=item["titulo"];var imagem=(jQuery.trim(item["imagem"]));var credito=item["imagem-credito"];var station=item["station"];var channel=item["channel"];if(station&&(station.length>0)&&(station.indexOf("UOL")==-1)){station="UOL "+station;}var link=item["url-uol"];var repository=item.repository;var descricao=Lib.UOLBusca.Util.textExcerpt(item.descricao,80);var objItem={titulo:titulo,imagem:imagem,credito:credito,link:link,station:station,repository:repository,descricao:descricao};result+=this.parseToHTML(objItem);}}return result;};this.parseParams=function(params){var paramTemp=Lib.UOLBusca.Util.copyValidParams(params,this.validParams);paramTemp["d"]=this.parseQuery(jQuery(Lib.UOLBusca.Suggest.field).val());return Lib.UOLBusca.Util.parseToURLSearch(paramTemp);};this.parseQuery=function(string){string=string||"";string=string.replace(/^\s+|\s+$/g,"");if(string.indexOf(" ")>-1){string=string.replace(/ /g," AND ");}return string;};this.image=null;this.parseToHTML=function(obj){var html='<li class="suggest-tagpage {$repository}">\n';html+='<a title="{$titulo}" href="{$link}">\n';if(obj.imagem){obj.title=obj.credito.replace(/['"]/g,"");obj.imagem=(jQuery.trim(obj.imagem).match(/[0-9]{13}_\d+x\d+/))?jQuery.trim(obj.imagem).replace(/\d+x\d+/,"80x80"):jQuery.trim(obj.imagem);html+='<span class="image" href="{$imagem}" alt="{$titulo}"></span>\n';var img=new Lib.UOLBusca.UOLImagem(obj.imagem,64,64,"80x80","80x80;142x100",true);jQuery(img).bind("image_loaded",function(self){var container='li.suggest-tagpage span.image[href="'+this.src+'"]';var html=this.write();if(jQuery(Lib.UOLBusca.Suggest.container).find(container).get().length>0){jQuery(Lib.UOLBusca.Suggest.container).find(container).html(html);}else{setTimeout((function(self){return function(){var container='li.suggest-tagpage span.image[href="'+self.src+'"]';var html=self.write();jQuery(Lib.UOLBusca.Suggest.container).find(container).html(html);};})(this),400);}});img.load();}else{obj.imagem_default=Lib.UOLBusca.IMAGE_DEFAULT;html+='<span class="image"><img src="{$imagem_default}" width="65" height="65" /></span>\n';}html+='<span class="titulo';if(!obj.station){html+=" sem-station";}html+='"><strong>{$titulo}</strong>';if(obj.station){html+="<br />Em {$station}";}if((obj.repository=="product")&&(obj.descricao)){html+="<br />{$descricao}";}html+="</span>\n";html+="</a>\n";html+='<span class="radio" title="{$titulo}"></span>\n';html+="</li>\n";var tmpl=new Lib.UOLBusca.Template(html);return tmpl.compile(obj);};};Lib.UOLBusca.Suggest.TagpageSearch.prototype=new Lib.UOLBusca.Searcher();Lib.UOLBusca.Suggest.RadioSearch=function(string){this.className="RadioSearch";this.name=string.toLowerCase().replace(/[^a-z]/gi,"");this.className="Radio";this.searchWord=string;this.searchUrl="http://www.radio.uol.com.br/suggestion/"+this.searchWord+".ws";this.params={scope:"artist",contentType:"application/jsonp; charset=utf-8",callbackName:"callback",callback:"Lib.UOLBusca.Suggest.radioQueries."+this.name+".callback",format:"jsonp"};this.validParams=["scope","contentType"];this.callback=function(data){this.ajaxResponse(data);};this.parser=function(){var response=this.data;var result="<!-- // OK -->";var suggestion=(response.category&&response.category.length>0)?response.category[0].suggestion:{};if(suggestion&&suggestion.length>0){for(var i=0;i<suggestion.length;i++){var item=suggestion[i];var titulo=item["@name"];if(titulo==this.searchWord){var link="http://www.radio.uol.com.br/busca/"+titulo;var objItem={titulo:titulo,link:link};result=this.parseToHTML(objItem);}break;}}return result;};this.parseParams=function(params){var paramTemp=Lib.UOLBusca.Util.copyValidParams(params,this.validParams);return Lib.UOLBusca.Util.parseToURLSearch(paramTemp);};this.parseToHTML=function(obj){var html='<a href="{$link}"><strong>{$titulo}</strong> na Rádio UOL</a>\n';var tmpl=new Lib.UOLBusca.Template(html);return tmpl.compile(obj);};};Lib.UOLBusca.Suggest.RadioSearch.prototype=new Lib.UOLBusca.Searcher();Lib.UOLBusca.UI={_form:null,form:function(){if(!this._form){this._form=jQuery(Utils.Modules["buscasuggest"].lookFor);}return this._form;},v2:function(){var srch=this.form(),form=$(".srchForm",srch),glass=$(".srchGlass",srch),input=$(".srchInput input",srch),close=$(".srchClose",srch),sugg=$("#suggest"),colw=srch.width(),expw=form.width();glass.on("click",function(){if(form.hasClass("open")){return false;}$(window).on("scroll.v2",function(){sugg.slideUp("normal");});srch.addClass("open").animate({width:expw},"normal",function(){input.focus();srch.css("overflow","visible");placeholderfix.call(input.get(0),{type:"focus"});});});input.on("keyup keydown",function(event){placeholderfix.call(this,event);var value=this.value!=this.getAttribute("placeholder")?this.value:"";switch(event.keyCode||event.which){case 38:case 40:return;case 27:this.value="";this.blur();break;}if(value.length>=3){if(!sugg.is(":visible")&&sugg.find("li").length){sugg.slideDown();}else{sugg.find(".radio:empty").hide();}}else{if(sugg.is(":visible")){sugg.slideUp("fast");}}});input.on("blur",function(event){placeholderfix.call(this,event);if(this.value){sugg.slideUp("normal");}else{close.click();}});close.on("click",function(){if(input.val()!=""){input.val("").keyup().focus();}else{$(window).off("scroll.v2");srch.removeClass("open");srch.animate({width:colw},"normal",function(){srch.css("overflow","hidden");});}});var placeholderfix=!!/MSIE|Opera|Version\/[0-9.\s]+Safari/i.exec(navigator.userAgent)?function(event){if(event.type.indexOf("key")>-1&&$.inArray(event.keyCode||event.which,[16,17])>-1){return;}var placeholder=this.getAttribute("placeholder");switch(event.type){case"blur":if(this.value==placeholder){this.value="";this.removeAttribute("style");}return;default:if(this.value==""){this.value=placeholder;this.style.color="#666666";if(this.setSelectionRange){this.setSelectionRange(0,0);}}else{if(this.value==placeholder){this.value="";this.removeAttribute("style");}}break;}}:function(){};},init:function(form){if(form){this._form=jQuery(form);}this.v2();}};}(window));