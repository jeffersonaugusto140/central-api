var homeUOL={geoIp:{callback:function(data){Drop.geolocator.displayLocation({address:{city:{name:data[3],state:Drop.geolocator.STATES[data[2]][0]}}});}}};(function($){var Lib=window.Lib||{};Lib.Drop=Drop={isOver:false,TIMEOUT:300,last_click_open:null,init:function(elements){if(Drop.citySuggest.autostart){Drop.citySuggest.init();}if($(elements).filter(".drop-click").length){$("body").bind("click.closeDrop",function(e){if(!Drop.last_click_open){return true;}if($(e.target).parents(".drop-click").length===0){$(Drop.last_click_open).triggerHandler("click");}});}$(elements).each(function(){if(/drop-click/.test(this.className)===true){var $parent=$(this);$(this).children("a").bind("click",function(){if($parent.attr("drop")!="false"){if(Drop.last_click_open){Drop.out.apply(Drop.last_click_open);}Drop.linkOver.apply(this);Drop.last_click_open=this;}else{Drop.out.apply(this);Drop.last_click_open=null;}});}else{$(this).children("a").bind("mouseover",Drop.linkOver).bind("mouseout",Drop.out);$(this).children("div").bind("mouseover",Drop.over).bind("mouseout",Drop.out);}});},linkOver:function(){var $this=$(this),dLeft=Drop.getLeft($this),dRight=Drop.getRight($this),dTop=Drop.getTop($this),$parent=$this.parent();$this.siblings("div").css({"top":dTop}).css($parent.hasClass("drop-right")===true?"right":"left",dLeft).show().parent().addClass("open");$parent.find(".ui-scroll").each(function(){Utils.Scroll.updateVerticalHeight($(this));});try{var DropObj=$(this).parent().find(".drop-container");var headerMenuObj=($(this).parent().parent().parent().parent().parent("#header-menu").length!=0)?$(this).parent().parent().parent().parent().parent("#header-menu"):($(this).parent().parent().parent("#header-menu").length!=0?$(this).parent().parent().parent("#header-menu"):false);var topoNavegacaoObj=($(this).parent().parent().parent().parent("#topo-navegacao").length!=0)?$(this).parent().parent().parent().parent("#topo-navegacao"):false;var dropContainerOffset=DropObj.offset().left;var dropContainerSize=DropObj.outerWidth();var dropContainerPosition=dropContainerOffset+dropContainerSize;if(headerMenuObj){var headerMenuSize=headerMenuObj.outerWidth();var headerMenuOffset=headerMenuObj.offset().left;var headerMenuPosition=headerMenuSize+headerMenuOffset;}else{if(topoNavegacaoObj){var topoNavegacaoSize=topoNavegacaoObj.outerWidth();var topoNavegacaoOffset=topoNavegacaoObj.offset().left;var topoNavegacaoPosition=topoNavegacaoSize+topoNavegacaoOffset;}}if(headerMenuObj&&dropContainerPosition>headerMenuPosition){var newOffsetDropObj=((dropContainerOffset-dropContainerSize)+$(this).outerWidth());if(newOffsetDropObj<headerMenuOffset){var diferenca=dropContainerPosition-headerMenuPosition;DropObj.offset({left:(dropContainerOffset-diferenca)});}else{DropObj.offset({left:newOffsetDropObj});}}else{if(topoNavegacaoObj&&dropContainerPosition>topoNavegacaoPosition){var newOffsetDropObj=((dropContainerOffset-dropContainerSize)+$(this).outerWidth());if(newOffsetDropObj<topoNavegacaoOffset){var diferenca=dropContainerPosition-topoNavegacaoPosition;DropObj.offset({left:(dropContainerOffset-diferenca)});}else{DropObj.offset({left:newOffsetDropObj});}}}}catch(error){}$parent.attr("drop","false");$(".drop[drop=true]").each(function(){if($(this).find('.drop[drop="false"]').length===0){$(this).removeClass("open").children(".drop-container").hide();}});if($("html").hasClass("ie7")===true){$parent.css("z-index","1");}},over:function(){$(this).parent().attr("drop","false");},out:function(){var $this=$(this);$this.parent().attr("drop","true");setTimeout(function(){Drop.hide($this);},Drop.TIMEOUT);},hide:function($this){if($this.parent().attr("drop")=="true"){if($this.hasClass("drop-container")){$this.hide();}else{$this.siblings("div").hide();}$this.parent().removeClass("open");if($("html").hasClass("ie7")===true){$this.parents().removeAttr("style");}}},getTop:function(element){return element.parent().height();},getLeft:function(element){return element.get(0).offsetLeft;},getRight:function(element){return element.get(0).offsetLeft;}},Lib.Drop.citySuggest=Drop.citySuggest={SUPPORTS_STORAGE:typeof(Storage)!=="undefined",auto_update:$("#autoupdate").val()==="true"||false,current_city:(typeof(Storage)!=="undefined"&&sessionStorage.current_city)?sessionStorage.current_city:"",id_ibge:$("#idibge").val()||false,menu_type:$("#tipo-menu-topo").val()||"",plataforma:$("#plataforma").val()||"",autostart:$("#autostart").val()==="true"||false,appendTo:["header.tagpage div:first"],use_geolocation:$("#ativar-geolocalizacao").val()==="true",appendContent:function(output){$("#conteudo-menu").append(output);$("body").triggerHandler("afterCitySuggestRender");},appendMenu:function(){if($("#config-menu-topo",".dropcidades").length>0){$("body").trigger("beforeMenuAppend",[Drop.citySuggest.appendTo]);var header=$(Drop.citySuggest.appendTo[0],".dropcidades"),data=Drop.citySuggest.stringxObject(Drop.citySuggest.current_city),isnotEmptyNorUndefined=function(data){return data.value!==""&&data.data[1]!==""&&typeof data.value!=="undefined"&&typeof data.data[1]!=="undefined";},oldtext="<h1>"+$("h1",header).text()+"</h1><h2></h2>";if(Drop.citySuggest.plataforma.indexOf("mobile")!==-1){header.append('<div><button id="escolher-cidade" class="bgcolor8" onclick="Drop.citySuggest.toggleMenu()">'+(isnotEmptyNorUndefined(data)?data.value+" - "+data.data[1]:"escolher cidade")+'</button><div id="conteudo-menu" class="hide"></div></div>');}else{$("h1, h2",header).remove();header.append((isnotEmptyNorUndefined(data)?"<h1>"+data.value+"</h1><h2>"+data.data[1]+"</h2>":oldtext)+'<button id="escolher-cidade" class="bgcolor8" onclick="Drop.citySuggest.toggleMenu()">escolher cidade</button>').parent().append('<div id="conteudo-menu" class="hide"></div>');}$("body").append('<div class="overlay hide" onclick="Drop.citySuggest.toggleMenu()"></div>');$(".overlay").height($(document).height());$("body").triggerHandler("contentAppended");}},setCityOnStorage:function(data){if(Drop.citySuggest.SUPPORTS_STORAGE){sessionStorage.current_city=data.value+"|"+data.data[0]+"|"+data.data[1];}Drop.citySuggest.current_city=data.value+"|"+data.data[0]+"|"+data.data[1];$("body").triggerHandler("onCityChange",data);},toggleMenu:function(){if($("#geolocator-dialog").length>0){$("#geolocator-dialog, .overlay").toggleClass("hide");}else{$("#conteudo-menu, .overlay").toggleClass("hide");}},stringxObject:function(s){var info=s.split("|"),obj={data:[info[1],info[2]],value:info[0]};return obj;},htmlxObject:function(o){var $o=$(o),id=$o.attr("data-ibge-id"),name=$o.text().split(" - ")[0],province=$o.text().split(" - ")[1],obj={data:[id,province],value:name};return obj;},changeCity:function(o){var data=o;if(typeof data!=="object"){data=Drop.citySuggest.stringxObject(o);}Drop.citySuggest.setCityOnStorage(data);Drop.citySuggest.updateTitle(data);Drop.submenu.rebuild();},updateTitle:function(data){if(Drop.citySuggest.plataforma.indexOf("mobile")!==-1){$("#escolher-cidade").html(data.value+" - "+data.data[1]);}else{$("header.tagpage>div:first",".dropcidades").find("h1").html(data.value).end().find("h2").html(data.data[1]);}},init:function(){if($(".dropcidades.dev").length!==0){if(Drop.citySuggest.id_ibge!=="false"){Drop.citySuggest.changeCity(Drop.citySuggest.id_ibge);}this.appendMenu();if(this.menu_type==="cities"){Drop.cities.init();}else{if(this.menu_type==="suggest"){Drop.suggest.init();}}this.bind();Drop.submenu.init();if(this.use_geolocation){Drop.geolocator.init();}}},bind:function(){$("body").triggerHandler("onMenuLoad",(Drop.citySuggest.SUPPORTS_STORAGE&&sessionStorage.current_city)?this.stringxObject(sessionStorage.current_city):"");}},Lib.Drop.cities=Drop.cities={MAJOR_CITIES:["SÃ£o Paulo|3550308|SP","Salvador|2927408|BA","Rio de Janeiro|3304557|RJ","Belo Horizonte|3106200|MG","Recife|2611606|PE","Porto Alegre|4314902|RS","Fortaleza|2304400|CE","Curitiba|4106902|PR","Manaus|1302603|AM"],changeCity:function(o){Drop.citySuggest.changeCity(o);Drop.citySuggest.toggleMenu();$("body").triggerHandler("onCitySelect",Drop.citySuggest.stringxObject(o));},render:function(){var output='<ul id="lista-cidades">';$("body").triggerHandler("beforeCitiesRender",[Drop.cities.MAJOR_CITIES]);for(var i=0;i<=Drop.cities.MAJOR_CITIES.length-1;i++){var selected="";output+='<li class="h-bgcolor8'+selected+'" onclick="Drop.cities.changeCity(\''+Drop.cities.MAJOR_CITIES[i]+"')\">"+Drop.cities.MAJOR_CITIES[i].split("|")[0]+" - "+Drop.cities.MAJOR_CITIES[i].split("|")[2]+"</li>";}output+="</ul>";$("body").triggerHandler("onMenuRender",output);return output;},init:function(){Drop.citySuggest.appendContent(this.render());}},Lib.Drop.suggest=Drop.suggest={update_city_list:(typeof(Storage)!=="undefined"&&localStorage.cityListVersion&&localStorage.cityListVersion!==$("#versao-municipios").val()),render:function(){var output='<div id="holder-input"><input type="text" id="query-cidades" placeholder="Digite o nome da Cidade" /><button id="query-cidades-go" class="bgcolor6 pg-color4 pg-sprites1 botao-busca" type="button">ok</button></div>';return output;},bind:function(){if(Drop.citySuggest.SUPPORTS_STORAGE){localStorage.cityListVersion=$("#versao-municipios").val();}Drop.citySuggest.appendContent(this.render()+Drop.cities.render());$("#query-cidades").autocomplete("/municipios",{forceUpdate:Drop.suggest.update_city_list,mustMatch:true,matchInside:false,appendTo:(Drop.citySuggest.plataforma.indexOf("mobile")!==-1?"#holder-input":"body"),showResult:function(text,data){return text+" - "+data[1];},onItemSelect:function(data){Drop.citySuggest.changeCity(data);Drop.citySuggest.toggleMenu();}});},init:function(){loader({"test":window.Lib,"src":"https://jsuol.com.br/c/jquery/jquery.autocomplete.dylan.js","require":["https://jsuol.com.br/c/jquery/jquery.js"],onLoad:function(){Drop.suggest.bind();}});}},Lib.Drop.submenu=Drop.submenu={cidades:{"sao-paulo":{"produtos":[{"nome":"Home","link":"sao-paulo/"},{"nome":"Pesquisas","link":"pesquisas-eleitorais/sao-paulo/"},{"nome":"Candidatos","link":"infograficos/2012/07/02/veja-como-ficou-o-mapa-de-candidatos-e-partidos-nas-capitais-brasileiras.htm#sao-paulo"}]},"nacional":{"produtos":[{"nome":"Home","link":"sao-paulo/"},{"nome":"Pesquisas","link":"pesquisas-eleitorais/"}]},"salvador":{"produtos":[{"nome":"Home","link":"salvador/"},{"nome":"Pesquisas","link":"pesquisas-eleitorais/salvador/"},{"nome":"Candidatos","link":"infograficos/2012/07/02/veja-como-ficou-o-mapa-de-candidatos-e-partidos-nas-capitais-brasileiras.htm#salvador"}]},"recife":{"produtos":[{"nome":"Home","link":"recife/"},{"nome":"Pesquisas","link":"pesquisas-eleitorais/recife/"},{"nome":"Candidatos","link":"infograficos/2012/07/02/veja-como-ficou-o-mapa-de-candidatos-e-partidos-nas-capitais-brasileiras.htm#recife"}]},"rio-de-janeiro":{"produtos":[{"nome":"Home","link":"rio-de-janeiro/"},{"nome":"Pesquisas","link":"pesquisas-eleitorais/rio-de-janeiro/"},{"nome":"Candidatos","link":"infograficos/2012/07/02/veja-como-ficou-o-mapa-de-candidatos-e-partidos-nas-capitais-brasileiras.htm#rio-de-janeiro"}]},"fortaleza":{"produtos":[{"nome":"Home","link":"fortaleza/"},{"nome":"Pesquisas","link":"pesquisas-eleitorais/fortaleza/"},{"nome":"Candidatos","link":"infograficos/2012/07/02/veja-como-ficou-o-mapa-de-candidatos-e-partidos-nas-capitais-brasileiras.htm#fortaleza"}]},"porto-alegre":{"produtos":[{"nome":"Home","link":"porto-alegre/"},{"nome":"Pesquisas","link":"pesquisas-eleitorais/porto-alegre/"},{"nome":"Candidatos","link":"infograficos/2012/07/02/veja-como-ficou-o-mapa-de-candidatos-e-partidos-nas-capitais-brasileiras.htm#porto-alegre"}]},"curitiba":{"produtos":[{"nome":"Home","link":"curitiba/"},{"nome":"Pesquisas","link":"pesquisas-eleitorais/curitiba/"},{"nome":"Candidatos","link":"infograficos/2012/07/02/veja-como-ficou-o-mapa-de-candidatos-e-partidos-nas-capitais-brasileiras.htm#curitiba"}]},"belo-horizonte":{"produtos":[{"nome":"Home","link":"belo-horizonte/"},{"nome":"Pesquisas","link":"pesquisas-eleitorais/belo-horizonte/"},{"nome":"Candidatos","link":"infograficos/2012/07/02/veja-como-ficou-o-mapa-de-candidatos-e-partidos-nas-capitais-brasileiras.htm#belo-horizonte"}]},"natal":{"produtos":[{"nome":"Home","link":"natal/"},{"nome":"Candidatos","link":"infograficos/2012/07/02/veja-como-ficou-o-mapa-de-candidatos-e-partidos-nas-capitais-brasileiras.htm#natal"}]},"cuiaba":{"produtos":[{"nome":"Home","link":"cuiaba/"},{"nome":"Candidatos","link":"infograficos/2012/07/02/veja-como-ficou-o-mapa-de-candidatos-e-partidos-nas-capitais-brasileiras.htm#cuiaba"}]},"manaus":{"produtos":[{"nome":"Home","link":"manaus/"},{"nome":"Pesquisas","link":"pesquisas-eleitorais/manaus/"},{"nome":"Candidatos","link":"infograficos/2012/07/02/veja-como-ficou-o-mapa-de-candidatos-e-partidos-nas-capitais-brasileiras.htm#manaus"}]}},MAIN_LINK:$("#link-principal-submenu").val()||"http://eleicoes.uol.com.br/2012/",tipo:$("#tipos-submenu").val()||"nacional",render:function(){var output='<ul id="submenu-cidades">',selected="";$(Drop.submenu.cidades[Drop.submenu.tipo].produtos).each(function(e,produto){output+='<li><a class="h-color8'+selected+'" href="http://click.uol.com.br/?rf=eleicoes-nav-submenu&u='+Drop.submenu.MAIN_LINK+produto.link+'">'+produto.nome+"</a></li>";});output+="</ul>";return output;},rebuild:function(filter){if(filter){Drop.submenu.types+=" "+filter;}$("#submenu-cidades").replaceWith(this.render());},appendContent:function(output){$("#conteudo-menu").after(output);$("body").triggerHandler("afterSubmenuRender");$(".modinteracao:first").addClass("modinteracaocomcitysuggest");},init:function(){$("body").triggerHandler("beforeSubmenuRender",[Drop.submenu.cidades]);this.appendContent(this.render());}},Lib.Drop.geolocator=Drop.geolocator={STATES:{"01":["AC","Acre"],"02":["AL","Alagoas"],"03":["AP","AmapÃ¡"],"04":["AM","Amazonas"],"05":["BA","Bahia"],"06":["CE","CearÃ¡"],"07":["DF","Distrito Federal"],"08":["ES","EspÃ­rito Santo"],"11":["MS","Mato Grosso do Sul"],"13":["MA","Maranhao"],"14":["MT","Mato Grosso"],"15":["MG","Minas Gerais"],"16":["PA","ParÃ¡"],"17":["PB","ParaÃ­ba"],"18":["PR","ParanÃ¡"],"20":["PI","PiauÃ­"],"21":["RJ","Rio de Janeiro"],"22":["RN","Rio Grande do Norte"],"23":["RS","Rio Grande do Sul"],"24":["RO","RondÃ´nia"],"25":["RR","Roraima"],"26":["SC","Santa Catarina"],"27":["SP","SÃ£o Paulo"],"28":["SE","Sergipe"],"29":["GO","GoiÃ¡s"],"30":["PE","Pernambuco"],"31":["TO","Tocantins"]},location:"",filtered:{},mylat:"",mylong:"",changed_location:false,SUPPORTS_STORAGE:Drop.citySuggest.SUPPORTS_STORAGE,data:{},render:function(){var output='<div id="geolocator-dialog" class="hide"><span id="suggested-city">'+Drop.geolocator.location+'</span><p>Detectamos que vocÃª estÃ¡ acessando desta cidade, estÃ¡ correto?</p><button id="sim" onclick="Drop.geolocator.close(\'sim\')" class="bgcolor8" type="button">Sim</button><button id="nao" onclick="Drop.geolocator.close()" class="bgcolor8" type="button">NÃ£o</button></div>';return output;},displayLocation:function(data){var address=data.address;Drop.geolocator.data=address;Drop.geolocator.location=address.city.name+" - "+address.city.state;Drop.geolocator.changed_location=(sessionStorage.location!==Drop.geolocator.location);if(Drop.citySuggest.auto_update){Drop.citySuggest.updateTitle({value:address.city.name,data:["",address.city.state]});}if(Drop.geolocator.changed_location){sessionStorage.location=Drop.geolocator.location;Drop.geolocator.appendContent();}},changeCity:function(o){Drop.citySuggest.changeCity(o);Drop.citySuggest.toggleMenu();},fetchData:function(){var ajaxCallback=function(data){if(Drop.citySuggest.SUPPORTS_STORAGE&&!localStorage.dataAutocomplete){localStorage.dataAutocomplete=data;}var parsed=false;if(data!==false){parsed=Drop.geolocator.plainTextParser(data,"\n","|");}Drop.geolocator.filterResults(parsed,Drop.geolocator.changeCity);};if(!this.SUPPORTS_STORAGE||!localStorage.dataAutocomplete){$.ajax({url:"/municipios",success:ajaxCallback,error:function(jqXHR,textStatus,errorThrown){ajaxCallback(false);},dataType:"text"});}else{ajaxCallback(localStorage.dataAutocomplete);}},sanitizeResult:function(result){var value,data;var type=typeof result;if(type==="string"){value=result;data={};}else{if($.isArray(result)){value=result[0];data=result.slice(1);}else{if(type==="object"){value=result.value;data=result.data;}}}value=String(value);if(typeof data!=="object"){data={};}return{value:value,data:data};},filterResults:function(results,callback){var filtered=[];var i,result;for(i=0;i<results.length;i++){result=Drop.geolocator.sanitizeResult(results[i]);if(result.value===Drop.geolocator.location.split(" - ")[0]){callback(result);}}},plainTextParser:function(text,lineSeparator,cellSeparator){var results=[];var i,j,data,line,value,lines;lines=String(text).replace("\r\n","\n").split(lineSeparator);for(i=0;i<lines.length;i++){line=lines[i].split(cellSeparator);data=[];for(j=0;j<line.length;j++){data.push(decodeURIComponent(line[j]));}value=data.shift();results.push({value:value,data:data});}return results;},fromHome:function(){Drop.geolocator.load({url:"http://geoip.home.uol.com.br/index.jsonp",charset:"iso-8859-1",refresh:true});},errorFunction:function(){},close:function(confirma){if(confirma==="sim"){Drop.geolocator.fetchData();}else{$("#conteudo-menu").removeClass("hide");}$("#geolocator-dialog").remove();},load:function(j){var b=j.url,f=j.charset||"UTF-8",i=j.refresh||false,l=j.scope||window,g=document.createElement("script"),h=document.getElementsByTagName("head")[0];c=j.callback||function(){};g.type="text/javascript";g.async=false;g.charset=f;g.src=b;h.insertBefore(g,h.firstChild);setTimeout(c,500);},appendContent:function(){$("#conteudo-menu").after(Drop.geolocator.render());if(Drop.geolocator.changed_location){Drop.citySuggest.toggleMenu();}},getLocation:function(){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(Drop.geolocator.requestLocation,Drop.geolocator.errorFunction);}},requestLocation:function(pos){Drop.geolocator.mylat=pos.coords.latitude,Drop.geolocator.mylong=pos.coords.longitude;Drop.geolocator.load({url:"http://services.maplink.com.br/maplinkapi2/api.ashx?v=4&key=z1cFcCSXdKLIGGLVyxdQc1LEGMpQbXHrGLcEbYFywwAlwZLXuYpPRLV4vws=",charset:"iso-8859-1",refresh:true});Drop.geolocator.load({url:"http://map1.maplink.com.br/mainsc/apigz.ashx?v=4&Mversion=2.0.1.83&engine=",charset:"iso-8859-1",refresh:true,callback:Drop.geolocator.fetchLocation});},fetchLocation:function(){var af=new MWsAddressFinder(),pontoParaRevGeo=new MPoint();pontoParaRevGeo.x=Drop.geolocator.mylong;pontoParaRevGeo.y=Drop.geolocator.mylat;af.getAddress(pontoParaRevGeo,Drop.geolocator.displayLocation);},show:function(){Drop.geolocator.getLocation();},bind:function(){},init:function(){if(Drop.citySuggest.plataforma.indexOf("mobile")!==-1){Drop.geolocator.getLocation();}else{Drop.geolocator.fromHome();}}};})(jQuery);